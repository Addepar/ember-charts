/*!
* ember-charts v0.4.0
* Copyright 2012-2015 Addepar Inc.
* See LICENSE.
*/
(function(){var e;Ember.Charts=Ember.Namespace.create(),Ember.Charts.VERSION="0.4.0",null!=(e=Ember.libraries)&&e.register("Ember Charts",Ember.Charts.VERSION)})(),function(){Ember.AddeparMixins=Ember.AddeparMixins||Ember.Namespace.create(),Ember.AddeparMixins.ResizeHandlerMixin=Ember.Mixin.create({resizeEndDelay:200,resizing:!1,onResizeStart:Ember.K,onResizeEnd:Ember.K,onResize:Ember.K,endResize:Ember.computed(function(){return function(e){return this.isDestroyed?void 0:(this.set("resizing",!1),"function"==typeof this.onResizeEnd?this.onResizeEnd(e):void 0)}}),handleWindowResize:function(e){return this.get("resizing")||(this.set("resizing",!0),"function"==typeof this.onResizeStart&&this.onResizeStart(e)),"function"==typeof this.onResize&&this.onResize(e),Ember.run.debounce(this,this.get("endResize"),e,this.get("resizeEndDelay"))},didInsertElement:function(){return this._super(),this._setupDocumentHandlers()},willDestroyElement:function(){return this._removeDocumentHandlers(),this._super()},_setupDocumentHandlers:function(){return this._resizeHandler?void 0:(this._resizeHandler=jQuery.proxy(this.get("handleWindowResize"),this),jQuery(window).on("resize."+this.elementId,this._resizeHandler))},_removeDocumentHandlers:function(){return jQuery(window).off("resize."+this.elementId,this._resizeHandler),this._resizeHandler=null}})}(),function(){Ember.AddeparMixins=Ember.AddeparMixins||Ember.Namespace.create(),Ember.AddeparMixins.StyleBindingsMixin=Ember.Mixin.create({concatenatedProperties:["styleBindings"],attributeBindings:["style"],unitType:"px",createStyleString:function(e,t){var r;return r=this.get(t),void 0!==r?("number"===Ember.typeOf(r)&&(r+=this.get("unitType")),""+e+":"+r+";"):void 0},applyStyleBindings:function(){var e,t,r,i,a,n=this;return(r=this.styleBindings)?(e={},r.forEach(function(t){var r,i,a;a=t.split(":"),r=a[0],i=a[1],e[i||r]=r}),a=Ember.keys(e),t=a.map(function(t){return e[t]}),i=Ember.computed(function(){var t,r;return r=a.map(function(t){return n.createStyleString(t,e[t])}),t=r.join(""),0!==t.length?t:void 0}),i.property.apply(i,t),Ember.defineProperty(this,"style",i)):void 0},init:function(){return this.applyStyleBindings(),this._super()}})}(),function(){Ember.TEMPLATES["components/ember-chart"]=Ember.Handlebars.template(function(e,t,r,i,a){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),a=a||{};var n,s,o,u,l="",h=r.helperMissing,c=this.escapeExpression;return a.buffer.push("<svg "),s={width:t,height:t},o={width:"STRING",height:"STRING"},u={hash:{width:"outerWidth",height:"outerHeight"},contexts:[],types:[],hashContexts:s,hashTypes:o,data:a},a.buffer.push(c((n=r["bind-attr"]||t["bind-attr"],n?n.call(t,u):h.call(t,"bind-attr",u)))),a.buffer.push('>\n  <g class="chart-viewport" '),s={transform:t},o={transform:"STRING"},u={hash:{transform:"transformViewport"},contexts:[],types:[],hashContexts:s,hashTypes:o,data:a},a.buffer.push(c((n=r["bind-attr"]||t["bind-attr"],n?n.call(t,u):h.call(t,"bind-attr",u)))),a.buffer.push("></g>\n</svg>\n"),l})}(),function(){Ember.Charts.Helpers=Ember.Namespace.create({groupBy:function(e,t){var r,i,a,n,s,o,u;for(n={},i=o=0,u=e.length;u>=0?u>o:o>u;i=u>=0?++o:--o)s=e[i],a=t(s,i),r=n[a]||(n[a]=[]),r.push(s);return n},LabelTrimmer:Ember.Object.extend({getLabelSize:function(){return 100},getLabelText:function(e){return e.label},trim:Ember.computed(function(){var e,t;return e=this.get("getLabelSize"),t=this.get("getLabelText"),function(r){return r.text(function(i){var a,n,s,o,u;return a=this.getBBox().width,(s=t(i,r))?(n=a/s.length,u=e(i,r)-4*n,o=Math.floor(u/n),0>=o-3?"...":a>u?s.slice(0,o-3)+"...":s):""})}}).property("getLabelSize","getLabelText")})})}(),function(){Ember.Charts.Colorable=Ember.Mixin.create({selectedSeedColor:"rgb(65, 65, 65)",tint:.8,minimumTint:0,maximumTint:.66,colorScaleType:d3.scale.linear,renderVars:["colorScale"],colorRange:Ember.computed(function(){var e;return e=this.get("selectedSeedColor"),this.get("getColorRange")(e)}).property("selectedSeedColor","getColorRange"),getColorRange:Ember.computed(function(){var e=this;return function(t){var r,i,a;return r=d3.interpolateRgb(t,"rgb(255,255,255)"),a=r(e.get("minimumTint")),i=r(e.get("maximumTint")),[d3.rgb(a),d3.rgb(i)]}}).property("minimumTint","maximumTint"),colorScale:Ember.computed(function(){var e;return e=this.get("selectedSeedColor"),this.get("getColorScale")(e)}).property("selectedSeedColor","getColorScale"),getColorScale:Ember.computed(function(){var e=this;return function(t){var r;return r=e.get("getColorRange")(t),e.get("colorScaleType")().range(r)}}).property("getColorRange","colorScaleType"),secondaryMinimumTint:.4,secondaryMaximumTint:.85,secondaryColorScaleType:d3.scale.linear,secondaryColorRange:Ember.computed(function(){var e,t,r,i;return i=this.get("selectedSeedColor"),e=d3.interpolateRgb(i,"rgb(255,255,255)"),r=e(this.get("secondaryMinimumTint")),t=e(this.get("secondaryMaximumTint")),[d3.rgb(r),d3.rgb(t)]}).property("selectedSeedColor","secondaryMinimumTint","secondaryMaximumTint"),secondaryColorScale:Ember.computed(function(){return this.get("secondaryColorScaleType")().range(this.get("secondaryColorRange"))}).property("secondaryColorRange","secondaryColorScaleType"),leastTintedColor:Ember.computed(function(){return this.get("colorRange")[0]}).property("colorRange.@each"),mostTintedColor:Ember.computed(function(){return this.get("colorRange")[1]}).property("colorRange.@each"),numColorSeries:1,getSeriesColor:Ember.computed(function(){var e,t,r=this;return e=this.get("numColorSeries"),t=this.get("selectedSeedColor"),function(i,a){var n,s,o;return o=i.color||t,n=r.get("getColorRange")(o),s=r.get("getColorScale")(o),1===e?n[0]:s(a/(e-1))}}).property("numColorSeries","getColorRange","getColorScale")},"selectedSeedColor",{numSecondaryColorSeries:1,getSecondarySeriesColor:Ember.computed(function(){var e,t=this;return e=this.get("numSecondaryColorSeries"),function(r,i){return 1===e?t.get("secondaryColorRange")[0]:t.get("secondaryColorScale")(i/(e-1))}}).property("numSecondaryColorSeries","secondaryColorRange","secondaryColorScale")})}(),function(){Ember.Charts.Formattable=Ember.Mixin.create({formatLabelFunction:Ember.computed(function(){return d3.format(","+this.get("formatLabel"))}).property("formatLabel"),formatLabel:".2f"})}(),function(){Ember.Charts.AxesMixin=Ember.Mixin.create({graphicWidth:null,graphicHeight:null,minXTicks:3,minYTicks:3,tickSpacing:50,minAxisValue:0,maxAxisValue:0,numXTicks:Ember.computed(function(){var e;return e=Math.floor(this.get("graphicWidth")/this.get("tickSpacing")),Math.max(e,this.get("minXTicks"))}).property("graphicWidth","tickSpacing","minXTicks"),numYTicks:Ember.computed(function(){var e;return e=Math.floor(this.get("graphicHeight")/this.get("tickSpacing")),Math.max(e,this.get("minYTicks"))}).property("graphicHeight","tickSpacing","minYTicks"),formatValueAxis:Ember.computed(function(){var e,t,r;return t=Math.max(Math.abs(this.get("minAxisValue")),Math.abs(this.get("maxAxisValue"))),r=d3.formatPrefix(t),e=function(e){return""+r.scale(e)+r.symbol}}).property("minAxisValue","maxAxisValue")})}(),function(){Ember.Charts.FloatingTooltipMixin=Ember.Mixin.create({elementId:null,tooltipWidth:40,tooltipValueDisplayName:"Value",showTooltip:function(e,t){var r;return r=this._getTooltip(),r.html(e),r.show(),this._updateTooltipPosition(t)},hideTooltip:function(){return this._getTooltip().hide()},_tooltipId:Ember.computed(function(){return this.get("elementId")+"_tooltip"}),_getTooltip:function(){return $("#"+this.get("_tooltipId"))},_updateTooltipPosition:function(e){var t,r,i,a,n,s,o,u,l,h,c,g,d,p,m;return t=this._getTooltip(),p=10,m=10,c=t.width(),a=t.height(),d=$(window).scrollTop(),g=$(window).scrollLeft(),r=e.clientX+g,i=e.clientY+d,u=r-g+2*p+c>$(window).width()?-(c+2*p):p,o=r+u,h=i-d+2*m+a>$(window).height()?-(a+2*m):m,l=i+h,n=g+p,s=d+m,n>o&&(o=n),d+m>l&&(l=s),t.css("top",l+"px").css("left",o+"px")},didInsertElement:function(){return this._super(),$("body").append("<div class='chart-float-tooltip' id='"+this.get("_tooltipId")+"'></div>"),this.hideTooltip()},willDestroyElement:function(){return this._super(),this._getTooltip().remove()}})}(),function(){Ember.Charts.HasTimeSeriesRule=Ember.Mixin.create({xRange:null,yRange:null,xTimeScale:null,showDetails:null,hideDetails:null,lineColorFn:null,graphicHeight:null,updateLineMarkers:function(){var e,t,r;return t=this._getLineMarkers(),r=this.get("showDetails"),e=this.get("hideDetails"),t.enter().append("path").on("mouseover",function(e,t){return r(e,t,this)}).on("mouseout",function(t,r){return e(t,r,this)}).attr({"class":"line-marker",fill:this.get("lineColorFn"),d:d3.svg.symbol().size(50).type("circle")}),t.exit().remove(),t.attr({transform:function(e){return"translate("+e.x+","+e.y+")"}}),t.style({"stroke-width":function(e){return d3.select(e.path).attr("stroke-width")}})},_getLineMarkers:function(){return this.get("viewport").selectAll(".line-marker").data(this._lineMarkerData())},didInsertElement:function(){var e=this;return this._super(),d3.select(this.$("svg")[0]).on("mousemove",function(){return e.get("isInteractive")?e._isEventWithinValidRange()?Ember.run(e,e.get("updateLineMarkers")):void 0:void 0})},_lineMarkerTolerance:6e4,_mousePosition:function(){return d3.event?d3.mouse(this.get("$viewport")):null},_isEventWithinValidRange:function(){var e,t,r,i,a,n,s;return i=this.get("xRange"),n=this.get("yRange"),s=this._mousePosition(),r=s[0],a=s[1],e=r>d3.min(i)&&d3.max(i)>r,t=a>d3.min(n)&&d3.max(n)>a,e&&t},_lineMarkerData:function(){var e,t,r,i,a,n;return a=this._mousePosition(),Ember.isEmpty(a)?[]:(e=this.get("xTimeScale").invert,t=this.get("yScale").invert,r=this.get("_lineMarkerTolerance"),n=e(a[0]),i=[],this.get("viewport").selectAll("path.line").each(function(a){var s,o,u,l,h,c;for(s=0,o=25,c=0,l=this.getTotalLength(),h=l/2,u=this.getPointAtLength(h);Math.abs(n-e(u.x))>r&&o>++s;)e(u.x)>n?l=h:c=h,h=(c+l)/2,u=this.getPointAtLength(h);return i.push({x:u.x,y:u.y,group:a.group,value:t(u.y),time:e(u.x),path:this})}),i)}})}(),function(){var e,t,r;Ember.Charts.TimeSeriesLabeler=Ember.Mixin.create({centerAxisLabels:!1,selectedInterval:"M",dynamicXAxis:!1,SPECIFICITY_RATIO:.7,minTimeSpecificity:"S",maxTimeSpecificity:"Y",MONTHS_IN_QUARTER:3,xAxisTimeInterval:Ember.computed(function(e,t){var i;return i=this.get("dynamicXAxis")?null!=t?t:"M":this.get("selectedInterval"),i.length>1?r[i]:i}).property("selectedInterval","dynamicXAxis"),maxNumberOfLabels:10,DOMAIN_ORDERING:["S","H","D","W","M","Q","Y"],numberOfMinorTicks:Ember.computed(function(){var t,r,i,a,n,s,o,u,l,h;return s=this.get("labelledTicks"),h=this.get("xDomain"),u=h[0],l=h[1],r=this.get("xAxisTimeInterval"),n="Q"===r?this.MONTHS_IN_QUARTER:1,t=d3.time[e[r]](u,l,n),2>s.length?0:(i=function(e){return function(t){return+t===+e}},o=_.findIndex(t,i(s[1])),a=_.findIndex(t,i(s[0])),o-a-1)}).property("xDomain","xAxisTimeInterval","labelledTicks"),labelledTicks:Ember.computed(function(){var e,t,r,i,a,n,s,o;if(t=this.get("xDomain"),a=this.get("tickLabelerFn")(t[0],t[1]),this.get("centerAxisLabels")){for(e=1,r=this.domainTypeToLongDomainTypeSingular(this.get("xAxisTimeInterval")),"quarter"===r&&(e=this.MONTHS_IN_QUARTER,r="month"),o=[],n=0,s=a.length;s>n;n++)i=a[n],o.push(this._advanceMiddle(i,r,e));return o}return a}).property("xDomain","centerAxisLabels","xAxisTimeInterval"),_advanceMiddle:function(e,t,r){return new Date(e=e.getTime()/2+d3.time[t].offset(e,r)/2)},numTimeBetween:function(e,t,r){switch(e){case"seconds":return(r-t)/1e3;case"hours":return(r-t)/1e3;case"days":return(r-t)/864e5;case"weeks":return d3.time.weeks(t,r).length;case"months":return d3.time.months(t,r).length;case"quarters":return d3.time.months(t,r).length/this.MONTHS_IN_QUARTER;case"years":return d3.time.years(t,r).length}}},e={S:"seconds",H:"hours",D:"days",W:"weeks",M:"months",Q:"months",Y:"years"},t={S:"seconds",H:"hours",D:"days",W:"weeks",M:"months",Q:"quarters",Y:"years"},{domainTypeToLongDomainTypeSingular:function(e){var r;return r=t[e],r.substring(0,r.length-1)}},r={seconds:"S",hours:"H",days:"D",weeks:"W",months:"M",quarters:"Q",years:"Y"},{dynamicXLabelling:function(r,i){var a,n,s,o,u,l,h,c,g,d,p,m,f,b;for(u=this.get("DOMAIN_ORDERING").indexOf(this.get("minTimeSpecificity")),l=this.get("DOMAIN_ORDERING").indexOf(this.get("maxTimeSpecificity")),s=this.get("DOMAIN_ORDERING").slice(u,+l+1||9e9),c=function(){var t,r,i;for(i=[],t=0,r=s.length;r>t;t++)n=s[t],i.push(e[n]);return i}(),m=function(){var e,n,o;for(o=[],e=0,n=s.length;n>e;e++)a=s[e],o.push(this.numTimeBetween(t[a],r,i));return o}.call(this),g=null,d=this.get("maxNumberOfLabels"),o=f=0,b=m.length;b>f;o=++f)if(p=m[o],h=null,d>p?h="Q"===s[o]?this.MONTHS_IN_QUARTER:1:(s[o]===this.get("maxTimeSpecificity")||m[o+1]<d*this.get("SPECIFICITY_RATIO"))&&(h="Q"===s[o]?Math.ceil(this.MONTHS_IN_QUARTER*p/d):Math.ceil(p/d)),null!=h){this.set("xAxisTimeInterval",s[o]),g=d3.time[c[o]](r,i).filter(function(e,t){return!(t%h)});break}return g},tickLabelerFn:Ember.computed(function(){var r=this;return this.get("dynamicXAxis")?function(e,t){return r.dynamicXLabelling(e,t)}:function(i,a){var n,s,o;return n=r.get("xAxisTimeInterval"),o=r.numTimeBetween(t[n],i,a),"Q"===n?o>r.get("maxNumberOfLabels")?d3.time.years(i,a):d3.time.months(i,a,r.MONTHS_IN_QUARTER):(s=o>r.get("maxNumberOfLabels")?Math.ceil(o/r.get("maxNumberOfLabels")):1,d3.time[e[n]](i,a).filter(function(e,t){return!(t%s)}))}}).property("dynamicXAxis","maxNumberOfLabels","xAxisTimeInterval")},"SPECIFICITY_RATIO","minTimeSpecificity","maxTimeSpecificity",{quarterFormat:function(e){var t,r,i;return t=e.getMonth()%12,r="",r=3>t?"Q1":6>t?"Q2":9>t?"Q3":"Q4",i=d3.time.format("%Y")(e),r+" "+i},formattedTime:Ember.computed(function(){switch(this.get("xAxisTimeInterval")){case"years":case"Y":return d3.time.format("%Y");case"quarters":case"Q":return this.quarterFormat;case"months":case"M":return d3.time.format("%b '%y");case"weeks":case"W":return d3.time.format("%-m/%-d/%y");case"days":case"D":return d3.time.format("%-m/%-d/%y");case"hours":case"H":return d3.time.format("%H:%M:%S");case"seconds":case"S":return d3.time.format("%H:%M:%S");default:return d3.time.format("%Y")}}).property("xAxisTimeInterval")})}(),function(){Ember.Charts.Legend=Ember.Mixin.create({legendTopPadding:10,legendItemHeight:18,minLegendItemWidth:120,maxLegendItemWidth:160,legendIconRadius:9,legendLabelPadding:10,showLegend:!0,legendWidth:Ember.computed.alias("width"),legendHeight:Ember.computed(function(){return this.get("numLegendRows")*this.get("legendItemHeight")}).property("numLegendRows","legendItemHeight"),legendItemWidth:Ember.computed(function(){var e;return e=this.get("legendWidth")/this.get("legendItems.length"),this.get("minLegendItemWidth")>e?this.get("minLegendItemWidth"):e>this.get("maxLegendItemWidth")?this.get("maxLegendItemWidth"):e}).property("legendWidth","minLegendItemWidth","maxLegendItemWidth","legendItems.length"),numLegendItemsPerRow:Ember.computed(function(){return Math.floor(this.get("legendWidth")/this.get("legendItemWidth"))}).property("legendWidth","legendItemWidth"),numLegendRows:Ember.computed(function(){return Math.ceil(this.get("legendItems.length")/this.get("numLegendItemsPerRow"))}).property("legendItems.length","numLegendItemsPerRow"),legendLabelWidth:Ember.computed(function(){return this.get("legendItemWidth")-this.get("legendIconRadius")-2*this.get("legendLabelPadding")}).property("legendItemWidth","legendIconRadius","legendLabelPadding"),legendChartPadding:0,averageLegendLabelWidth:0,legendAttrs:Ember.computed(function(){var e,t,r;return e=this.get("outerWidth")/2,r=this.get("legendChartPadding")+this.get("legendTopPadding"),t=this.get("graphicBottom")+r,{transform:"translate("+e+", "+t+")"}}).property("outerWidth","graphicBottom","legendTopPadding","legendChartPadding"),legendItemAttrs:Ember.computed(function(){var e,t,r,i,a,n=this;return r=this.get("legendItemWidth"),t=this.get("legendItemHeight"),a=this.get("numLegendItemsPerRow"),i=this.get("legendItems.length"),e=1===this.get("numLegendRows"),{"class":"legend-item",width:r,"stroke-width":0,transform:function(s,o){var u,l,h,c,g;return u=o%a,g=Math.floor(o/a),c=e?i:a,l=u*r-c/2*r+n.get("averageLegendLabelWidth")/2,h=g*t+t/2,"translate("+l+", "+h+")"}}}).property("legendItemWidth","legendItemHeight","numLegendItemsPerRow","legendItems.length","numLegendRows","averageLegendLabelWidth"),legendIconAttrs:Ember.computed(function(){var e,t;return e=this.get("legendIconRadius"),t=this.get("legendItemHeight"),{d:function(t,r){return"line"===t.icon(t)?"M "+-e+" 0 L "+e+" 0":d3.svg.symbol().type(t.icon(t,r)).size(Math.pow(e,2))(t,r)},fill:function(e,t){return _.isFunction(e.fill)?e.fill(e,t):e.fill},stroke:function(e,t){return _.isFunction(e.stroke)?e.stroke(e,t):e.stroke},"stroke-width":function(e){return e.width?_.isFunction(e.width)?e.width(e,i):e.width:1.5},"stroke-dasharray":function(e){return e.dotted?"2,2":void 0}}}).property("legendIconRadius","legendItemHeight"),legendLabelAttrs:Ember.computed(function(){return{x:this.get("legendIconRadius")/2+this.get("legendLabelPadding"),y:".35em"}}).property("legendIconRadius","legendLabelPadding","legendItemHeight"),showLegendDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n,s;return d3.select(i).classed("hovered",!0),t.selector&&e.get("viewport").selectAll(t.selector).classed("hovered",!0),a='<span class="tip-label">'+t.label+"</span>",null!=t.xValue&&(n=e.get("formatXValue"),s=e.get("formatYValue"),a+='<span class="name">'+e.get("tooltipXValueDisplayName")+": </span>",a+='<span class="value">'+n(t.xValue)+"</span><br/>",a+='<span class="name">'+e.get("tooltipYValueDisplayName")+": </span>",a+='<span class="value">'+s(t.yValue)+"</span>"),e.showTooltip(a,d3.event)}:Ember.K}).property("isInteractive"),hideLegendDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){return d3.select(i).classed("hovered",!1),t.selector&&e.get("viewport").selectAll(t.selector).classed("hovered",!1),e.hideTooltip()}:Ember.K}).property("isInteractive"),clearLegend:function(){return this.get("viewport").select(".legend-container").remove()},legend:Ember.computed(function(){var e;return e=this.get("viewport").select(".legend-container"),e.empty()?this.get("viewport").append("g").attr("class","legend-container"):e}).volatile(),drawLegend:function(){var e,t,r,i,a,n,s,o,u,l,h;if(this.get("showLegend"))return this.clearLegend(),a=this.get("legend"),a.attr(this.get("legendAttrs")),u=this.get("showLegendDetails"),e=this.get("hideLegendDetails"),s=a.selectAll(".legend-item").data(this.get("legendItems")).enter().append("g").attr(this.get("legendItemAttrs")).on("mouseover",function(e,t){return u(e,t,this)}).on("mouseout",function(t,r){return e(t,r,this)}),n=this.get("legendIconAttrs"),t=this.get("isShowingTotal"),h=this.get("totalPointShape"),s.each(function(e,r){var i;return i=d3.select(this),0===r&&t?i.append("g").attr("class","icon").call(h):d3.select(this).append("path").attr("class","icon").attr(n)}),o=this.get("legendLabelWidth"),r=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(){return o},getLabelText:function(e){return e.label}}),i=s.append("text").style("text-anchor","start").text(function(e){return e.label}).attr(this.get("legendLabelAttrs")).call(r.get("trim")),l=0,a.selectAll("text").each(function(){return l+=this.getComputedTextLength()}),this.set("averageLegendLabelWidth",l/this.get("legendItems.length"))}})}(),function(){Ember.Charts.PieLegend=Ember.Mixin.create({legendVerticalPadding:30,legendHorizontalPadding:Ember.computed(function(){return.2*this.get("outerWidth")}).property("outerWidth"),maxLabelHeight:Ember.computed(function(){return.05*this.get("outerHeight")}).property("outerWidth","outerHeight"),showLegend:!0,legendWidth:Ember.computed(function(){return this.get("outerWidth")-this.get("legendHorizontalPadding")}).property("outerWidth","legendHorizontalPadding"),legendHeight:Ember.computed(function(){return this.get("maxLabelHeight")+2*this.get("legendVerticalPadding")}).property("maxLabelHeight","legendVerticalPadding"),legendAttrs:Ember.computed(function(){var e,t,r;return e=0,r=.15*this.get("marginBottom")-this.get("marginTop")/2,t=this.get("outerHeight")/2+r,{transform:"translate("+e+", "+t+")"}}).property("outerHeight","marginTop","marginBottom"),legendLabelAttrs:Ember.computed(function(){return{style:"text-anchor:middle;",y:"-.35em"}}),legend:Ember.computed(function(){var e;return e=this.get("viewport").select(".legend"),e.empty()?this.get("viewport").append("g").attr("class","legend"):e}).volatile(),clearLegend:function(){return this.get("viewport").select(".legend .labels").remove()},drawLegend:function(){var e,t,r,i,a,n,s,o,u,l,h,c;if(this.get("showLegend")){for(this.clearLegend(),a=this.get("legend").attr(this.get("legendAttrs")),s=this.get("viewport").select(".other-slice"),this.get("isInteractive")&&!s.empty()&&a.on("mouseover",function(){return s.classed("hovered",!0),a.classed("hovered",!0)}).on("mouseout",function(){return s.classed("hovered",!1),a.classed("hovered",!1)}),i=a.append("g").attr("class","labels"),t=this.get("legendItems").map(function(e){return null!=e.percent?""+e.label+" ("+e.percent+"%)":e.label}),o=i.append("text").text("Other: "+t[0]).attr(this.get("legendLabelAttrs")),r=0,c=t.slice(1),l=0,h=c.length;h>l;l++)if(n=c[l],e=o.text(),o.text(""+e+", "+n),u=o.node(),u.getBBox().width>this.get("legendWidth")){if(r+u.getBBox().height>this.get("maxLabelHeight")){o.text(""+e+", ...");break}o.text(""+e+","),r+=u.getBBox().height,o=i.append("text").text(n).attr(this.get("legendLabelAttrs")).attr("dy",r)}return i.attr("transform","translate(0, "+-r+")")}}})}(),function(){Ember.Charts.ChartComponent=Ember.Component.extend(Ember.Charts.Colorable,Ember.AddeparMixins.ResizeHandlerMixin,{layoutName:"components/ember-chart",classNames:["chart-frame","scroll-y"],isInteractive:!0,horizontalMargin:30,verticalMargin:30,marginRight:Ember.computed.alias("horizontalMargin"),marginLeft:Ember.computed.alias("horizontalMargin"),marginTop:Ember.computed.alias("verticalMargin"),marginBottom:Ember.computed.alias("verticalMargin"),defaultOuterHeight:500,defaultOuterWidth:700,outerHeight:Ember.computed.alias("defaultOuterHeight"),outerWidth:Ember.computed.alias("defaultOuterWidth"),width:Ember.computed(function(){return this.get("outerWidth")-this.get("marginLeft")-this.get("marginRight")}).property("outerWidth","marginLeft","marginRight"),height:Ember.computed(function(){return Math.max(1,this.get("outerHeight")-this.get("marginBottom")-this.get("marginTop"))}).property("outerHeight","marginBottom","marginTop"),$viewport:Ember.computed(function(){return this.$(".chart-viewport")[0]}),viewport:Ember.computed(function(){return d3.select(this.get("$viewport"))}),transformViewport:Ember.computed(function(){return"translate("+this.get("marginLeft")+","+this.get("marginTop")+")"}).property("marginLeft","marginTop"),labelPadding:10,labelWidth:30,labelHeight:15,labelWidthOffset:Ember.computed(function(){return this.get("labelWidth")+this.get("labelPadding")}).property("labelWidth","labelPadding"),labelHeightOffset:Ember.computed(function(){return this.get("labelHeight")+this.get("labelPadding")}).property("labelHeight","labelPadding"),graphicTop:0,graphicLeft:0,graphicWidth:Ember.computed.alias("width"),graphicHeight:Ember.computed.alias("height"),graphicBottom:Ember.computed(function(){return this.get("graphicTop")+this.get("graphicHeight")}).property("graphicTop","graphicHeight"),graphicRight:Ember.computed(function(){return this.get("graphicLeft")+this.get("graphicWidth")}).property("graphicLeft","graphicWidth"),hasNoData:Ember.computed(function(){return Ember.isEmpty(this.get("finishedData"))}).property("finishedData"),concatenatedProperties:["renderVars"],renderVars:["finishedData","width","height","margin","isInteractive"],init:function(){var e,t,r,i,a;for(this._super(),i=this.get("renderVars").uniq(),a=[],t=0,r=i.length;r>t;t++)e=i[t],this.addObserver(e,this.drawOnce),a.push(this.get(e));return a},willDestroyElement:function(){var e,t,r,i;for(i=this.get("renderVars").uniq(),t=0,r=i.length;r>t;t++)e=i[t],this.removeObserver(e,this,this.drawOnce);return this._super()},didInsertElement:function(){return this._super(),this._updateDimensions(),this.drawOnce()},drawOnce:function(){return Ember.run.once(this,this.get("draw"))},onResizeEnd:function(){return this._updateDimensions()},_updateDimensions:function(){return this.set("defaultOuterHeight",this.$().height()),this.set("defaultOuterWidth",this.$().width())},clearChart:function(){return this.$(".chart-viewport").children().remove()},draw:function(){return"inDOM"===(this._state||this.state)?this.get("hasNoData")?this.clearChart():this.drawChart():void 0}})}(),function(){Ember.Charts.SortableChartMixin=Ember.Mixin.create({sortKey:"value",sortAscending:!0,sortedData:Ember.computed(function(){var e,t,r;return e=this.get("data"),t=this.get("sortKey"),r=this.get("sortAscending"),Ember.isEmpty(e)?[]:null!=t?r?e.sortBy(t):e.sortBy(t).reverse():e}).property("data.[]","sortKey","sortAscending")})}(),function(){Ember.Charts.NoMarginChartMixin=Ember.Mixin.create({marginLeft:0,marginRight:0,marginBottom:Ember.computed(function(){return this.get("hasLegend")?30:0}).property("hasLegend"),maxLabelLength:function(e){var t;return t=0,e.each(function(){return this.getComputedTextLength()>t?t=this.getComputedTextLength():void 0}),t}})}(),function(){Ember.Charts.HorizontalBarComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.FloatingTooltipMixin,Ember.Charts.Formattable,Ember.Charts.SortableChartMixin,{classNames:["chart-horizontal-bar"],defaultOuterHeight:500,labelWidth:Ember.computed(function(){return.25*this.get("outerWidth")}).property("outerWidth"),labelPadding:20,barPadding:.2,maxBarThickness:60,minBarThickness:20,finishedData:Ember.computed.alias("sortedData"),minOuterHeight:Ember.computed(function(){var e;return e=this.get("numBars")*this.get("minBarThickness"),e+this.get("marginTop")+this.get("marginBottom")}).property("numBars","minBarThickness","marginTop","marginBottom"),maxOuterHeight:Ember.computed(function(){var e;return e=this.get("numBars")*this.get("maxBarThickness"),e+this.get("marginTop")+this.get("marginBottom")}).property("numBars","maxBarThickness","marginTop","marginBottom"),outerHeight:Ember.computed(function(){var e;return e=d3.max([this.get("defaultOuterHeight"),this.get("minOuterHeight")]),d3.min([e,this.get("maxOuterHeight")])}).property("minOuterHeight","maxOuterHeight","defaultOuterHeight"),marginTop:Ember.computed.alias("labelPadding"),marginBottom:Ember.computed.alias("labelPadding"),horizontalMargin:Ember.computed(function(){return this.get("labelWidth")+2*this.get("labelPadding")}).property("labelWidth","labelPadding"),numBars:Ember.computed.alias("finishedData.length"),xDomain:Ember.computed(function(){var e,t,r,i;return i=this.get("finishedData").map(function(e){return e.value}),r=d3.min(i),t=d3.max(i),0>r?(e=Math.max(-r,t),[-e,e]):[0,t]}).property("finishedData","xDomainPadding"),xScale:Ember.computed(function(){return d3.scale.linear().domain(this.get("xDomain")).range([0,this.get("width")]).nice()}).property("width","xDomain"),yScale:Ember.computed(function(){return d3.scale.ordinal().domain(d3.range(this.get("numBars"))).rangeRoundBands([0,this.get("height")],this.get("barPadding"))}).property("height","barPadding"),barThickness:Ember.computed(function(){return this.get("yScale").rangeBand()}).property("yScale"),showDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n;return d3.select(i).classed("hovered",!0),n=e.get("formatLabelFunction"),a='<span class="tip-label">'+t.label+"</span>",a+='<span class="name">'+e.get("tooltipValueDisplayName")+": </span>",a+='<span class="value">'+n(t.value)+"</span>",e.showTooltip(a,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){return d3.select(i).classed("hovered",!1),e.hideTooltip()}:Ember.K}).property("isInteractive"),groupAttrs:Ember.computed(function(){var e,t;return e=this.get("xScale"),t=this.get("yScale"),{transform:function(r,i){var a;return a=Math.min(0,r.value),"translate("+e(a)+", "+t(i)+")"}}}).property("xScale","yScale"),barAttrs:Ember.computed(function(){var e,t=this;return e=this.get("xScale"),{width:function(t){return Math.abs(e(t.value)-e(0))},height:this.get("barThickness"),"stroke-width":0,style:function(e){var r;return e.color?"fill:"+e.color:(r=0>e.value?t.get("mostTintedColor"):t.get("leastTintedColor"),"fill:"+r)}}}).property("xScale","mostTintedColor","leastTintedColor","barThickness"),valueLabelAttrs:Ember.computed(function(){var e,t=this;return e=this.get("xScale"),{x:function(r){return 0>r.value?-t.get("labelPadding"):e(r.value)-e(0)+t.get("labelPadding")},y:this.get("barThickness")/2,dy:".35em","text-anchor":function(e){return 0>e.value?"end":"start"},"stroke-width":0}}).property("xScale","barThickness","labelPadding"),groupLabelAttrs:Ember.computed(function(){var e,t=this;return e=this.get("xScale"),{x:function(r){return 0>r.value?e(0)-e(r.value)+t.get("labelPadding"):-t.get("labelPadding")},y:this.get("barThickness")/2,dy:".35em","text-anchor":function(e){return 0>e.value?"start":"end"},"stroke-width":0}}).property("xScale","barThickness","labelPadding"),axisAttrs:Ember.computed(function(){var e;return e=this.get("xScale"),{x1:e(0),x2:e(0),y1:0,y2:this.get("height")}}).property("xScale","height"),groups:Ember.computed(function(){return this.get("viewport").selectAll(".bar").data(this.get("finishedData"))}).volatile(),yAxis:Ember.computed(function(){var e;return e=this.get("viewport").select(".y.axis line"),e.empty()?this.get("viewport").insert("g",":first-child").attr("class","y axis").append("line"):e}).volatile(),renderVars:["barThickness","yScale","finishedData","colorRange"],drawChart:function(){return this.updateData(),this.updateAxes(),this.updateGraphic()},updateData:function(){var e,t,r,i;return t=this.get("groups"),i=this.get("showDetails"),r=this.get("hideDetails"),e=t.enter().append("g").attr("class","bar").on("mouseover",function(e,t){return i(e,t,this)}).on("mouseout",function(e,t){return r(e,t,this)}),e.append("rect"),e.append("text").attr("class","value"),e.append("text").attr("class","group"),t.exit().remove()},updateAxes:function(){return this.get("yAxis").attr(this.get("axisAttrs"))},updateGraphic:function(){var e,t,r,i=this;return e=this.get("groups").attr(this.get("groupAttrs")),e.select("rect").attr(this.get("barAttrs")),e.select("text.value").text(function(e){return i.get("formatLabelFunction")(e.value)}).attr(this.get("valueLabelAttrs")),r=this.get("labelWidth"),t=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(){return r},getLabelText:function(e){return e.label}}),e.select("text.group").text(function(e){return e.label}).attr(this.get("groupLabelAttrs")).call(t.get("trim"))}}),Ember.Handlebars.helper("horizontal-bar-chart",Ember.Charts.HorizontalBarComponent)}(),function(){Ember.Charts.PieComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.PieLegend,Ember.Charts.FloatingTooltipMixin,Ember.Charts.Formattable,Ember.Charts.SortableChartMixin,{classNames:["chart-pie"],minSlicePercent:5,maxNumberOfSlices:8,labelWidth:Ember.computed(function(){return.25*this.get("outerWidth")}).property("outerWidth"),maxRadius:2e3,minimumTopBottomMargin:0,filteredData:Ember.computed(function(){var e;return e=this.get("data"),Ember.isEmpty(e)?[]:e.filter(function(e){return e.value>=0})}).property("data.@each"),rejectedData:Ember.computed(function(){var e;return e=this.get("data"),Ember.isEmpty(e)?[]:e.filter(function(e){return 0>e.value})}).property("data.@each"),sortedData:Ember.computed(function(){var e,t;return e=this.get("filteredData"),t=e.reduce(function(e,t){return t.value+e},0),0===t?[]:(e=e.map(function(e){return{color:e.color,label:e.label,value:e.value,percent:d3.round(100*e.value/t)}
}),_.sortBy(e,this.get("sortKey")))}).property("filteredData","sortKey"),sortedDataWithOther:Ember.computed(function(){var e,t,r,i,a,n,s,o,u,l;return e=_.cloneDeep(this.get("sortedData")).reverse(),i=this.get("maxNumberOfSlices"),a=this.get("minNumberOfSlices"),n=this.get("minSlicePercent"),s=[],o={label:"Other",percent:0,_otherItems:s},r=_.indexOf(e,_.find(e,function(e){return n>e.percent})),0>r?r=e.length:(_.rest(e,r).forEach(function(e){return s.push(e),o.percent+=e.percent}),n>o.percent&&(t=e[r-1],n>t.percent&&(r-=1,s.push(t),o.percent+=t.percent))),o.percent>0&&(i-=1),l=_.first(e,r),u=_.rest(l,i),u.length>0&&(u.forEach(function(e){return s.push(e),o.percent+=e.percent}),l=_.first(l,i)),1===s.length?l.push(s[0]):o.percent>0&&l.push(o),l.reverse()}).property("sortedData","maxNumberOfSlices","minSlicePercent"),otherData:Ember.computed(function(){var e,t,r;return t=_.find(this.get("sortedDataWithOther"),function(e){return e._otherItems}),e=null!=(r=null!=t?t._otherItems:void 0)?r:[],_.sortBy(e,this.get("sortFunction")).reverse()}).property("sortedDataWithOther.[]","sortFunction"),otherDataValue:Ember.computed(function(){var e,t;return t=0,e=this.get("otherData"),null!=e&&e.forEach(function(e){return t+=e.value}),t}).property("otherData.[]"),finishedData:Ember.computed.alias("sortedDataWithOther"),horizontalMargin:Ember.computed(function(){return this.get("labelPadding")+this.get("labelWidth")}).property("labelPadding","labelWidth"),_marginBottom:Ember.computed(function(){return this.get("hasLegend")?this.get("legendHeight"):this.get("marginTop")}).property("legendHeight","hasLegend","marginTop"),marginBottom:Ember.computed(function(){return Math.max(this.get("_marginBottom"),this.get("minimumTopBottomMargin"))}).property("_marginBottom","minimumTopBottomMargin"),_marginTop:Ember.computed(function(){return Math.max(1,.1*this.get("outerHeight"))}).property("outerHeight"),marginTop:Ember.computed(function(){return Math.max(this.get("_marginTop"),this.get("minimumTopBottomMargin"))}).property("_marginTop","minimumTopBottomMargin"),numSlices:Ember.computed.alias("finishedData.length"),startOffset:Ember.computed(function(){var e,t;return e=this.get("finishedData"),t=e.reduce(function(e,t){return t.percent+e},0),2*(_.last(e).percent/t)*Math.PI}).property("finishedData"),radius:Ember.computed(function(){return d3.min([this.get("maxRadius"),this.get("width")/2,this.get("height")/2])}).property("maxRadius","width","height"),labelRadius:Ember.computed(function(){return this.get("radius")+this.get("labelPadding")}).property("radius","labelPadding"),getSliceColor:Ember.computed(function(){var e=this;return function(t,r){var i,a,n;return(null!=(n=t.data)?n.color:void 0)?t.data.color:(a=e.get("numSlices"),i=a-r-1,1!==a&&(i/=a-1),e.get("colorScale")(i))}}).property("numSlices","colorScale"),legendItems:Ember.computed(function(){return this.get("otherData").concat(this.get("rejectedData"))}).property("otherData","rejectedData"),hasLegend:Ember.computed(function(){return this.get("legendItems.length")>0&&this.get("showLegend")}).property("legendItems.length","showLegend"),showDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n,s,o;return d3.select(i).classed("hovered",!0),n=t.data,o=n._otherItems?e.get("otherDataValue"):n.value,s=e.get("formatLabelFunction"),a='<span class="tip-label">'+n.label+"</span>",a+='<span class="name">'+e.get("tooltipValueDisplayName")+": </span>",a+='<span class="value">'+s(o)+"</span>",e.showTooltip(a,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a;return d3.select(i).classed("hovered",!1),a=t.data,a._otherItems?e.get("viewport").select(".legend").classed("hovered",!1):e.hideTooltip()}:Ember.K}).property("isInteractive"),transformViewport:Ember.computed(function(){var e,t;return e=this.get("marginLeft")+this.get("width")/2,t=this.get("marginTop")+this.get("height")/2,"translate("+e+","+t+")"}).property("marginLeft","marginTop","width","height"),arc:Ember.computed(function(){return d3.svg.arc().outerRadius(this.get("radius")).innerRadius(0)}).property("radius"),pie:Ember.computed(function(){return d3.layout.pie().startAngle(this.get("startOffset")).endAngle(this.get("startOffset")+2*Math.PI).sort(null).value(function(e){return e.percent})}).property("startOffset"),groupAttrs:Ember.computed(function(){return{"class":function(e){return e.data._otherItems?"arc other-slice":"arc"}}}),sliceAttrs:Ember.computed(function(){return{d:this.get("arc"),fill:this.get("getSliceColor"),stroke:this.get("getSliceColor")}}).property("arc","getSliceColor"),labelAttrs:Ember.computed(function(){var e,t,r,i,a;return e=this.get("arc"),r=this.get("labelRadius"),a={left:[],right:[]},t=function(e,t,r){var i,n,s,o;for(n=a[e],s=0,o=n.length;o>s;s++)if(i=n[s],r>Math.abs(t-i))return!0;return!1},this.get("numSlices")>1?{dy:".35em",style:null,"stroke-width":0,"text-anchor":function(e){var t;return t=.5*(e.endAngle-e.startAngle)+e.startAngle,t>Math.PI&&2*Math.PI>t?"end":"start"},transform:function(i){var n,s,o,u,l,h,c,g;return g=e.centroid(i),h=g[0],c=g[1],n=function(e){return e/Math.sqrt(h*h+c*c)*r},o=n(h),u=n(c),s=this.getBBox().height,l=o>0?"right":"left",t(l,u,s)&&(u="right"===l?_.max(a[l])+s:_.min(a[l])-s),a[l].push(u),"translate("+o+","+u+")"}}:(i=this.get("mostTintedColor"),{dy:".71em","stroke-width":0,"text-anchor":"middle",transform:null,style:"fill:"+i+";"})}).property("arc","labelRadius","numSlices","mostTintedColor"),groups:Ember.computed(function(){var e;return e=this.get("pie")(this.get("finishedData")),this.get("viewport").selectAll(".arc").data(e)}).volatile(),renderVars:["radius","labelWidth","finishedData"],drawChart:function(){return this.updateData(),this.updateGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},updateData:function(){var e,t,r,i;return t=this.get("groups"),i=this.get("showDetails"),r=this.get("hideDetails"),e=t.enter().append("g").attr({"class":"arc"}).on("mouseover",function(e,t){return i(e,t,this)}).on("mouseout",function(e,t){return r(e,t,this)}),e.append("path").attr("class","slice"),e.append("text").attr("class","data"),t.exit().remove()},updateGraphic:function(){var e,t,r;return e=this.get("groups").attr(this.get("groupAttrs")),e.select("path").attr(this.get("sliceAttrs")),r=this.get("labelWidth"),t=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(){return r},getLabelText:function(e){return e.data.label}}),e.select("text.data").text(function(e){return e.data.label}).attr(this.get("labelAttrs")).call(t.get("trim")).text(function(e){return""+this.textContent+", "+e.data.percent+"%"})}}),Ember.Handlebars.helper("pie-chart",Ember.Charts.PieComponent)}(),function(){Ember.Charts.VerticalBarComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.Legend,Ember.Charts.FloatingTooltipMixin,Ember.Charts.AxesMixin,Ember.Charts.Formattable,Ember.Charts.SortableChartMixin,Ember.Charts.NoMarginChartMixin,{classNames:["chart-vertical-bar"],ungroupedSeriesName:"Other",stackBars:!1,withinGroupPadding:0,betweenGroupPadding:Ember.computed(function(){var e;return e=d3.scale.linear().domain([1,8]).range([1.25,.25]).clamp(!0),e(this.get("numBars"))}).property("numBars"),numBars:Ember.computed(function(){return this.get("xBetweenGroupDomain.length")*this.get("xWithinGroupDomain.length")||0}).property("xBetweenGroupDomain","xWithinGroupDomain"),maxLabelHeight:50,groupedData:Ember.computed(function(){var e,t,r,i,a,n=this;if(e=this.get("sortedData"),Ember.isEmpty(e))return[];for(e=Ember.Charts.Helpers.groupBy(e,function(e){var t;return null!=(t=e.group)?t:n.get("ungroupedSeriesName")}),a=_.keys(e),r=0,i=a.length;i>r;r++)t=a[r],e[t]=e[t].sortBy("label");return e}).property("sortedData","ungroupedSeriesName"),groupNames:Ember.computed(function(){var e,t,r,i;r=this.get("groupedData"),i=[];for(e in r)t=r[e],i.push(e);return i}).property("groupedData"),isGrouped:Ember.computed(function(){return this.get("groupNames.length")>1}).property("groupNames.length"),finishedData:Ember.computed(function(){var e,t,r,i,a,n,s,o,u,l,h;if(this.get("isGrouped")){if(Ember.isEmpty(this.get("groupedData")))return[];o=this.get("groupedData"),l=[];for(t in o)i=o[t],a=0,r=function(){var t,r,n;for(n=[],t=0,r=i.length;r>t;t++)e=i[t],n.push({y0:a,y1:a+=Math.max(e.value,0),value:e.value,group:e.group,label:e.label,color:e.color});return n}(),l.push({group:t,values:i,stackedValues:r,totalValue:a});return l}if(this.get("stackBars"))return Ember.isEmpty(this.get("data"))?[]:(a=0,r=function(){var t,r,i,n;for(i=this.get("data"),n=[],t=0,r=i.length;r>t;t++)e=i[t],n.push({y0:a,y1:a+=Math.max(e.value,0)});return n}.call(this),[{group:this.get("data.firstObject.group"),values:this.get("data"),stackedValues:r,totalValue:a}]);if(Ember.isEmpty(this.get("data")))return[];for(u=this.get("sortedData"),h=[],n=0,s=u.length;s>n;n++)e=u[n],h.push({group:e.label,values:[e]});return h}).property("groupedData","isGrouped","stackBars","sortedData"),labelHeightOffset:Ember.computed(function(){var e;return e=this.get("_shouldRotateLabels")?this.get("maxLabelHeight"):this.get("labelHeight"),e+this.get("labelPadding")}).property("_shouldRotateLabels","maxLabelHeight","labelHeight","labelPadding"),legendChartPadding:Ember.computed.alias("labelHeightOffset"),graphicLeft:Ember.computed.alias("labelWidthOffset"),graphicWidth:Ember.computed(function(){return this.get("width")-this.get("labelWidthOffset")}).property("width","labelWidthOffset"),graphicHeight:Ember.computed(function(){return this.get("height")-this.get("legendHeight")-this.get("legendChartPadding")}).property("height","legendHeight","legendChartPadding"),yDomain:Ember.computed(function(){var e,t,r,i,a,n,s;return e=this.get("finishedData"),n=d3.min(e,function(e){return _.min(e.values.map(function(e){return e.value}))}),r=d3.max(e,function(e){return _.max(e.values.map(function(e){return e.value}))}),i=d3.max(e,function(e){return e.totalValue}),s=d3.min(e,function(){return 0}),this.get("stackBars")?(a=s,t=i):(a=n,t=r),a>0?[0,t]:0>t?[a,0]:a===t&&0===t?[0,1]:[a,t]}).property("finishedData","stackBars"),yScale:Ember.computed(function(){return d3.scale.linear().domain(this.get("yDomain")).range([this.get("graphicTop")+this.get("graphicHeight"),this.get("graphicTop")]).nice(this.get("numYTicks"))}).property("graphicTop","graphicHeight","yDomain","numYTicks"),individualBarLabels:Ember.computed(function(){var e;return e=_.values(this.get("groupedData")).map(function(e){return _.pluck(e,"label")}),_.uniq(_.flatten(e))}).property("groupedData.@each"),labelIDMapping:Ember.computed(function(){return this.get("individualBarLabels").reduce(function(e,t,r){return e[t]=r,e},{})}).property("individualBarLabels.[]"),xBetweenGroupDomain:Ember.computed.alias("groupNames"),xWithinGroupDomain:Ember.computed.alias("individualBarLabels"),groupWidth:Ember.computed(function(){return this.get("xBetweenGroupScale").rangeBand()}).property("xBetweenGroupScale"),barWidth:Ember.computed(function(){return this.get("xWithinGroupScale").rangeBand()}).property("xWithinGroupScale"),xWithinGroupScale:Ember.computed(function(){return this.get("isGrouped")||this.get("stackBars")?d3.scale.ordinal().domain(this.get("xWithinGroupDomain")).rangeRoundBands([0,this.get("groupWidth")],this.get("withinGroupPadding")/2,0):d3.scale.ordinal().domain(this.get("xWithinGroupDomain")).rangeRoundBands([0,this.get("groupWidth")],this.get("betweenGroupPadding")/2,this.get("betweenGroupPadding")/2)}).property("isGrouped","stackBars","xWithinGroupDomain","groupWidth","withinGroupPadding","betweenGroupPadding"),xBetweenGroupScale:Ember.computed(function(){var e,t;return t=this.get("labelWidth"),e=this.get("isGrouped")||this.get("stackBars")?this.get("betweenGroupPadding"):0,d3.scale.ordinal().domain(this.get("xBetweenGroupDomain")).rangeRoundBands([0,this.get("graphicWidth")],e/2,e/2)}).property("isGrouped","stackBars","graphicWidth","labelWidth","xBetweenGroupDomain","betweenGroupPadding"),minAxisValue:Ember.computed(function(){var e;return e=this.get("yScale"),e.domain()[0]}).property("yScale"),maxAxisValue:Ember.computed(function(){var e;return e=this.get("yScale"),e.domain()[1]}).property("yScale"),numColorSeries:Ember.computed.alias("individualBarLabels.length"),hasLegend:Ember.computed(function(){return this.get("stackBars")||this.get("isGrouped")&&this.get("legendItems.length")>1&&this.get("showLegend")}).property("stackBars","isGrouped","legendItems.length","showLegend"),legendItems:Ember.computed(function(){var e,t=this;return e=this.get("getSeriesColor"),this.get("individualBarLabels").map(function(r,i){var a;return a=e(r,i),t.get("stackBars")&&(i=t.get("labelIDMapping")[r]),{label:r,fill:a,stroke:a,icon:function(){return"square"},selector:".grouping-"+i}})}).property("individualBarLabels.[]","getSeriesColor","stackBars","labelIDMapping.[]"),showDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n,s,o;return o=Ember.isArray(t.values),i=o?i.parentNode.parentNode:i,d3.select(i).classed("hovered",!0),n=t.group?'<span class="tip-label">'+t.group+"</span>":"",s=e.get("formatLabelFunction"),a=function(e){return n+='<span class="name">'+e.label+": </span>",n+='<span class="value">'+s(e.value)+"</span><br/>"},o?t.values.forEach(a):a(t),e.showTooltip(n,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){return Ember.isArray(t.values)&&(i=i.parentNode.parentNode),d3.select(i).classed("hovered",!1),e.hideTooltip()}:Ember.K}).property("isInteractive"),groupAttrs:Ember.computed(function(){var e,t=this;return e=this.get("xBetweenGroupScale"),{transform:function(r){var i,a;return i=t.get("graphicLeft")+e(r.group),a=t.get("graphicTop"),"translate("+i+", "+a+")"}}}).property("graphicLeft","graphicTop","xBetweenGroupScale"),stackedBarAttrs:Ember.computed(function(){var e,t,r=this;return t=1,e=this.get("yScale"),{"class":function(e){var t;return t=r.get("labelIDMapping")[e.label],"grouping-"+t},"stroke-width":0,width:function(){return r.get("groupWidth")},x:null,y:function(r){return e(r.y1)+t},height:function(t){return e(t.y0)-e(t.y1)}}}).property("yScale","groupWidth","labelIDMapping.[]"),groupedBarAttrs:Ember.computed(function(){var e,t,r=this;return t=1,e=this.get("yScale"),{"class":function(e,t){return"grouping-"+t},"stroke-width":0,width:function(){return r.get("barWidth")},x:function(e){return r.get("xWithinGroupScale")(e.label)},height:function(r){return Math.max(0,Math.abs(e(r.value)-e(0))-t)},y:function(r){return r.value>0?e(r.value):e(0)+t}}}).property("yScale","getSeriesColor","barWidth","xWithinGroupScale"),labelAttrs:Ember.computed(function(){var e=this;return{"stroke-width":0,transform:function(t){var r,i;return r=e.get("barWidth")/2,r+=e.get("isGrouped")||e.get("stackBars")?e.get("groupWidth")/2-e.get("barWidth")/2:e.get("xWithinGroupScale")(t.group),i=e.get("graphicTop")+e.get("graphicHeight")+e.get("labelPadding"),"translate("+r+", "+i+")"}}}).property("barWidth","isGrouped","stackBars","groupWidth","xWithinGroupScale","graphicTop","graphicHeight","labelPadding"),groups:Ember.computed(function(){return this.get("viewport").selectAll(".bars").data(this.get("finishedData"))}).volatile(),yAxis:Ember.computed(function(){var e;return e=this.get("viewport").select(".y.axis"),e.empty()?this.get("viewport").insert("g",":first-child").attr("class","y axis"):e}).volatile(),maxLabelWidth:Ember.computed(function(){return this.get("isGrouped")||this.get("stackBars")?this.get("groupWidth"):this.get("barWidth")}).property("isGrouped","stackBars","groupWidth","barWidth"),_shouldRotateLabels:!1,setRotateLabels:function(){var e,t,r;return e=this.get("groups").select(".groupLabel text"),t=this.get("maxLabelWidth"),r=!1,this.get("rotatedLabelLength")>t&&e.each(function(){return this.getBBox().width>t?r=!0:void 0}),this.set("_shouldRotateLabels",r)},rotateLabelDegrees:Ember.computed(function(){var e,t;return t=Math.atan(this.get("labelHeight")/this.get("maxLabelWidth")),e=180*t/Math.PI,Math.max(e,20)}).property("labelHeight","maxLabelWidth"),rotatedLabelLength:Ember.computed(function(){var e;return e=Math.PI/180*this.get("rotateLabelDegrees"),Math.abs(this.get("maxLabelHeight")/Math.sin(e))}).property("maxLabelHeight","rotateLabelDegrees"),renderVars:["xWithinGroupScale","xBetweenGroupScale","yScale","finishedData","getSeriesColor"],drawChart:function(){return this.updateData(),this.updateLayout(),this.updateAxes(),this.updateGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},updateData:function(){var e,t,r,i,a,n;return r=this.get("groups"),a=this.get("showDetails"),i=this.get("hideDetails"),t=r.enter().append("g").attr("class","bars"),t.append("g").attr("class","groupLabel").append("text").on("mouseover",function(e,t){return a(e,t,this)}).on("mouseout",function(e,t){return i(e,t,this)}),r.exit().remove(),n=this.get("stackBars")?function(e){return e.stackedValues}:function(e){return e.values},e=r.selectAll("rect").data(n),e.enter().append("rect").on("mouseover",function(e,t){return a(e,t,this)}).on("mouseout",function(e,t){return i(e,t,this)}),e.exit().remove()},updateLayout:function(){var e,t,r,i,a,n=this;return e=this.get("groups"),r=e.select(".groupLabel text").attr("transform",null).text(function(e){return e.group}),this.setRotateLabels(),this.get("_shouldRotateLabels")?(a=this.get("rotateLabelDegrees"),t=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(){return n.get("rotatedLabelLength")},getLabelText:function(e){return e.group}}),r.call(t.get("trim")).attr({"text-anchor":"end",transform:"rotate("+-a+")",dy:function(){return this.getBBox().height}})):(i=this.get("maxLabelWidth"),t=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(){return i},getLabelText:function(e){var t;return null!=(t=e.group)?t:""}}),r.call(t.get("trim")).attr({"text-anchor":"middle",dy:this.get("labelPadding")}))},updateAxes:function(){var e,t,r,i;return i=d3.svg.axis().scale(this.get("yScale")).orient("right").ticks(this.get("numYTicks")).tickSize(this.get("graphicWidth")).tickFormat(this.get("formatValueAxis")),e=this.get("yAxis"),this.set("graphicLeft",this.maxLabelLength(e.selectAll("text"))+this.get("labelPadding")),r=this.get("graphicTop"),t=this.get("graphicLeft"),e.attr({transform:"translate("+t+","+r+")"}).call(i),e.selectAll("g").filter(function(e){return 0!==e}).classed("major",!1).classed("minor",!0),e.selectAll("text").style("text-anchor","end").attr({x:-this.get("labelPadding")})},updateGraphic:function(){var e,t;return t=this.get("groups"),e=this.get("stackBars")?this.get("stackedBarAttrs"):this.get("groupedBarAttrs"),t.attr(this.get("groupAttrs")),t.selectAll("rect").style("fill",this.get("getSeriesColor")).attr(e),t.select("g.groupLabel").attr(this.get("labelAttrs"))}}),Ember.Handlebars.helper("vertical-bar-chart",Ember.Charts.VerticalBarComponent)}(),function(){Ember.Charts.ScatterComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.Legend,Ember.Charts.FloatingTooltipMixin,Ember.Charts.AxesMixin,Ember.Charts.NoMarginChartMixin,{classNames:["chart-scatter"],formatXValue:d3.format(",.2f"),formatYValue:d3.format(",.2f"),dotRadius:7,dotShapeArea:Ember.computed(function(){return Math.pow(this.get("dotRadius"),2)}).property("dotRadius"),graphPadding:.05,tickSpacing:80,marginRight:Ember.computed.alias("horizontalMargin"),isShowingTotal:!1,totalPointData:null,filteredData:Ember.computed(function(){var e;return e=this.get("data"),Ember.isEmpty(e)?[]:e.filter(function(e){return null!=e.xValue&&null!=e.yValue&&isFinite(e.xValue)&&isFinite(e.yValue)})}).property("data.@each"),groupedData:Ember.computed(function(){var e,t,r,i,a,n=this;if(e=this.get("filteredData"),Ember.isEmpty(e))return[];t=Ember.Charts.Helpers.groupBy(e,function(e){var t;return null!=(t=e.group)?t:n.get("ungroupedSeriesName")}),a=[];for(r in t)i=t[r],a.push(i);return a}).property("filteredData.@each"),groupNames:Ember.computed(function(){var e,t,r,i,a;for(i=this.get("groupedData"),a=[],t=0,r=i.length;r>t;t++)e=i[t],a.push(e.get(0).group);return a}).property("groupedData"),numGroups:Ember.computed.alias("groupedData.length"),isGrouped:Ember.computed(function(){return this.get("numGroups")>1}).property("numGroups"),finishedData:Ember.computed.alias("groupedData"),axisTitleHeightOffset:Ember.computed(function(){return this.get("axisTitleHeight")+this.get("labelPadding")}).property("axisTitleHeight","labelPadding"),legendChartPadding:Ember.computed(function(){return this.get("axisTitleHeightOffset")+this.get("labelHeightOffset")}).property("labelHeightOffset","axisTitleHeightOffset"),graphicTop:Ember.computed.alias("axisTitleHeight"),graphicLeft:Ember.computed.alias("labelWidthOffset"),graphicHeight:Ember.computed(function(){return this.get("height")-this.get("legendHeight")-this.get("legendChartPadding")}).property("height","legendHeight","legendChartPadding"),graphicWidth:Ember.computed(function(){return this.get("width")-this.get("labelWidthOffset")}).property("width","labelWidthOffset"),axisTitleHeight:18,xDomain:Ember.computed(function(){var e,t,r,i;return e=this.get("isShowingTotal")?[this.get("totalPointData")]:[],i=d3.extent(e.concat(this.get("filteredData")),function(e){return e.xValue}),r=i[0],t=i[1],r===t&&0===t?[-1,1]:r===t?[r*(1-this.get("graphPadding")),r*(1+this.get("graphPadding"))]:[r,t]}).property("filteredData.@each","isShowingTotal","totalPointData"),yDomain:Ember.computed(function(){var e,t,r,i;return e=this.get("isShowingTotal")?[this.get("totalPointData")]:[],i=d3.extent(e.concat(this.get("filteredData")),function(e){return e.yValue}),r=i[0],t=i[1],r===t&&0===t?[-1,1]:r===t?[r*(1-this.get("graphPadding")),r*(1+this.get("graphPadding"))]:[r,t]}).property("filteredData.@each","isShowingTotal","totalPointData","graphPadding"),xScale:Ember.computed(function(){var e,t,r,i;return i=this.get("xDomain"),e=this.get("graphicLeft"),t=this.get("graphicWidth"),r=(i[1]-i[0])*this.get("graphPadding"),d3.scale.linear().domain([i[0]-r,i[1]+r]).range([e,e+t]).nice(this.get("numXTicks"))}).property("xDomain","graphPadding","graphicLeft","graphicWidth","numXTicks"),yScale:Ember.computed(function(){var e,t,r,i;return i=this.get("yDomain"),t=this.get("graphicTop"),e=this.get("graphicHeight"),r=(i[1]-i[0])*this.get("graphPadding"),d3.scale.linear().domain([i[0]-r,i[1]+r]).range([t+e,t]).nice(this.get("numYTicks"))}).property("yDomain","graphPadding","graphicTop","graphicHeight","numYTicks"),groupShapes:Ember.computed(function(){return["circle","square","triangle-up","cross","diamond"]}),numGroupShapes:Ember.computed.alias("groupShapes.length"),numGroupColors:2,maxNumGroups:Ember.computed(function(){return this.get("numGroupColors")*this.get("numGroupShapes")}).property("numGroupColors","numGroupShapes"),displayGroups:Ember.computed(function(){return this.get("isGrouped")&&this.get("numGroups")<=this.get("maxNumGroups")}).property("isGrouped","numGroups","numGroupShapes"),getGroupShape:Ember.computed(function(){var e=this;return function(t,r){return r=e.get("groupNames").indexOf(t.group),e.get("displayGroups")?e.get("groupShapes")[r%e.get("numGroupShapes")]:"circle"}}),getGroupColor:Ember.computed(function(){var e=this;return function(t,r){var i;return i=0,e.get("displayGroups")&&(r=e.get("groupNames").indexOf(t.group),i=Math.floor(r/e.get("numGroupShapes"))),e.get("colorScale")(i/e.get("numGroupColors"))}}),hasLegend:Ember.computed(function(){return this.get("isGrouped")&&this.get("showLegend")}).property("isGrouped","showLegend"),legendIconRadius:Ember.computed.alias("dotRadius"),legendItems:Ember.computed(function(){var e,t,r,i,a;return this.get("hasNoData")?[]:(r=this.get("getGroupShape"),t=this.get("getGroupColor"),e=this.get("displayGroups"),i=this.get("groupedData").map(function(i,a){var n,s;return n=i.get(0).group,s=1===i.get("length")?i.get(0):null,{label:n,group:n,stroke:t,fill:e?t:"transparent",icon:r,selector:".group-"+a,xValue:null!=s?s.xValue:void 0,yValue:null!=s?s.yValue:void 0}}),this.get("isShowingTotal")&&(a=this.get("totalPointData"),i.unshift({label:a.group,group:a.group,stroke:t,selector:".totalgroup",xValue:a.xValue,yValue:a.yValue})),i)}).property("hasNoData","groupedData","getGroupShape","getGroupColor","displayGroups","isShowingTotal","totalPointData"),xValueDisplayName:"X Factor",yValueDisplayName:"Y Factor",showDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n,s;return d3.select(i).classed("hovered",!0),n=e.get("formatXValue"),s=e.get("formatYValue"),a='<span class="tip-label">'+t.group+"</span>",a+='<span class="name">'+e.get("xValueDisplayName")+": </span>",a+='<span class="value">'+n(t.xValue)+"</span><br/>",a+='<span class="name">'+e.get("yValueDisplayName")+": </span>",a+='<span class="value">'+s(t.yValue)+"</span>",e.showTooltip(a,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){return d3.select(i).classed("hovered",!1),e.hideTooltip()}:Ember.K}).property("isInteractive"),groupAttrs:Ember.computed(function(){return{"class":function(e,t){return"group group-"+t}}}),pointAttrs:Ember.computed(function(){var e=this;return{d:d3.svg.symbol().size(this.get("dotShapeArea")).type(this.get("getGroupShape")),fill:this.get("displayGroups")?this.get("getGroupColor"):"transparent",stroke:this.get("getGroupColor"),"stroke-width":1.5,transform:function(t){var r,i;return r=e.get("xScale")(t.xValue),i=e.get("yScale")(t.yValue),"translate("+r+", "+i+")"}}}).property("dotShapeArea","getGroupShape","xScale","yScale","displayGroups","getGroupColor"),groups:Ember.computed(function(){return this.get("viewport").selectAll(".group").data(this.get("finishedData"))}).volatile(),selectOrCreateAxis:function(e){var t;return t=this.get("viewport").select(e),t.empty()?this.get("viewport").insert("g",":first-child"):t},selectOrCreateAxisTitle:function(e){var t;return t=this.get("viewport").select(e),t.empty()?this.get("viewport").append("text"):t},xAxis:Ember.computed(function(){return this.selectOrCreateAxis(".x.axis").attr("class","x axis")}).volatile(),yAxis:Ember.computed(function(){return this.selectOrCreateAxis(".y.axis").attr("class","y axis")}).volatile(),xAxisTitle:Ember.computed(function(){return this.selectOrCreateAxisTitle(".x.axis-title").attr("class","x axis-title")}).volatile(),yAxisTitle:Ember.computed(function(){return this.selectOrCreateAxisTitle(".y.axis-title").attr("class","y axis-title")}).volatile(),renderVars:["xScale","yScale","dotShapeArea","finishedData","xValueDisplayName","yValueDisplayName"],drawChart:function(){return this.updateTotalPointData(),this.updateData(),this.updateAxes(),this.updateGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},totalPointShape:Ember.computed(function(){var e,t=this;return e=this.get("dotShapeArea"),function(r){return r.append("path").attr({"class":"totaldot",d:d3.svg.symbol().size(e).type("circle"),fill:t.get("getGroupColor")}),r.append("path").attr({"class":"totaloutline",d:d3.svg.symbol().size(3*e).type("circle"),fill:"transparent",stroke:t.get("getGroupColor"),"stroke-width":2})}}),updateTotalPointData:function(){var e,t;return e=this.get("isShowingTotal")?[this.get("totalPointData")]:[],t=this.get("viewport").selectAll(".totalgroup").data(e),t.exit().remove(),t.enter().append("g").attr("class","totalgroup").call(this.get("totalPointShape"))},updateData:function(){var e,t;return e=this.get("groups"),e.enter().append("g").attr("class","group").attr(this.get("groupAttrs")),e.exit().remove(),t=e.selectAll(".dot").data(function(e){return e}),t.enter().append("path").attr("class","dot"),t.exit().remove()},updateAxes:function(){var e,t,r,i,a,n,s,o,u;return s=d3.svg.axis().scale(this.get("xScale")).orient("top").ticks(this.get("numXTicks")).tickSize(this.get("graphicHeight")).tickFormat(this.get("formatXValue")),u=d3.svg.axis().scale(this.get("yScale")).orient("right").ticks(this.get("numYTicks")).tickSize(this.get("graphicWidth")).tickFormat(this.get("formatYValue")),a=this.get("graphicTop"),r=this.get("graphicHeight"),e=this.get("xAxis").attr("transform","translate(0,"+(a+r)+")").call(s),e.selectAll("g").filter(function(e){return 0!==e}).classed("major",!1).classed("minor",!0),n=this.get("labelPadding"),e.selectAll("text").style("text-anchor","middle").attr({y:function(){return this.getBBox().height+n/2}}),t=this.get("yAxis"),this.set("graphicLeft",this.maxLabelLength(t.selectAll("text"))+this.get("labelPadding")),i=this.get("graphicLeft"),t.attr("transform","translate("+i+",0)").call(u),t.selectAll("g").filter(function(e){return 0!==e}).classed("major",!1).classed("minor",!0),t.selectAll("text").style("text-anchor","end").attr({x:-this.get("labelPadding")}),o=this.get("labelHeightOffset")+this.get("labelPadding"),this.get("xAxisTitle").text(this.get("xValueDisplayName")).style("text-anchor","middle").attr({x:this.get("graphicWidth")/2+this.get("labelWidthOffset"),y:this.get("graphicBottom")+o}),this.get("yAxisTitle").text(this.get("yValueDisplayName")).style("text-anchor","start").attr({y:0,x:0})},updateGraphic:function(){var e,t,r=this;return t=this.get("showDetails"),e=this.get("hideDetails"),this.get("groups").selectAll(".dot").attr(this.get("pointAttrs")).on("mouseover",function(e,r){return t(e,r,this)}).on("mouseout",function(t,r){return e(t,r,this)}),this.get("viewport").select(".totalgroup").on("mouseover",function(e,r){return t(e,r,this)}).on("mouseout",function(t,r){return e(t,r,this)}).attr({transform:function(e){var t,i;return t=r.get("xScale")(e.xValue),i=r.get("yScale")(e.yValue),"translate("+t+", "+i+")"}})}}),Ember.Handlebars.helper("scatter-chart",Ember.Charts.ScatterComponent)}(),function(){Ember.Charts.TimeSeriesComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.Legend,Ember.Charts.TimeSeriesLabeler,Ember.Charts.FloatingTooltipMixin,Ember.Charts.HasTimeSeriesRule,Ember.Charts.AxesMixin,Ember.Charts.Formattable,Ember.Charts.NoMarginChartMixin,{classNames:["chart-time-series"],lineData:null,barData:null,formatTime:d3.time.format("%Y-%m-%d"),formatTimeLong:d3.time.format("%a %b %-d, %Y"),ungroupedSeriesName:"Other",interpolate:!1,yAxisFromZero:!1,barPadding:0,barGroupPadding:.25,barLeftOffset:0,DEFAULT_MAX_NUMBER_OF_LABELS:10,finishedData:Ember.computed(function(){return{lineData:this.get("_groupedLineData"),groupedBarData:this.get("_groupedBarData")}}).property("_groupedLineData.@each.values","_groupedBarData.@each"),hasNoData:Ember.computed(function(){return!this.get("_hasBarData")&&!this.get("_hasLineData")}).property("_hasBarData","_hasLineData"),legendChartPadding:Ember.computed.alias("labelHeightOffset"),_getLabelOrDefault:function(e){var t;return(null!=(t=e.label)?""+t:void 0)||this.get("ungroupedSeriesName")},_groupedLineData:Ember.computed(function(){var e,t,r,i,a,n=this;if(r=this.get("lineData"),Ember.isEmpty(r))return[];t=Ember.Charts.Helpers.groupBy(r,function(e){return n._getLabelOrDefault(e)}),a=[];for(e in t)i=t[e],a.push({group:e,values:i});return a}).property("lineData.@each","ungroupedSeriesName"),_groupedBarData:Ember.computed(function(){var e,t,r,i,a,n,s,o,u;return e=this.get("barData"),Ember.isEmpty(e)?[]:(r=Ember.Charts.Helpers.groupBy(e,function(e){return e.time.getTime()}),t=function(){var e;e=[];for(u in r)n=r[u],e.push(function(){var e,t,r;for(r=[],e=0,t=n.length;t>e;e++)a=n[e],s=this._getLabelOrDefault(a),o=a.time,i=this._transformCenter(a.time),r.push({group:s,time:i,value:a.value,label:s,labelTime:o});return r}.call(this));return e}.call(this))}).property("barData.@each","ungroupedSeriesName","barLeftOffset"),_transformCenter:function(e){var t,r;return t=this._getTimeDeltaFromSelectedInterval(),r=this.get("barLeftOffset"),0!==r&&(e=this._padTimeWithIntervalMultiplier(e,t,r)),e},_getTimeDeltaFromSelectedInterval:function(){switch(this.get("selectedInterval")){case"years":case"Y":return"year";
case"quarters":case"Q":return"quarter";case"months":case"M":return"month";case"weeks":case"W":return"week";case"seconds":case"S":return"second"}},_padTimeForward:function(e,t){return this._padTimeWithIntervalMultiplier(e,t,.5)},_padTimeBackward:function(e,t){return this._padTimeWithIntervalMultiplier(e,t,-.5)},_padTimeWithIntervalMultiplier:function(e,t,r){var i,a,n;return null!=e&&(i="quarter"===t?"month":t,n="quarter"===t?3:1,a=d3.time[i].offset(e,n)-e.getTime(),e=a*r+e.getTime()),new Date(e)},_barGroups:Ember.computed(function(){var e,t,r=this;return e=this.get("barData"),Ember.isEmpty(e)?[]:(t=Ember.Charts.Helpers.groupBy(e,function(e){return r._getLabelOrDefault(e)}),_.keys(t))}).property("barData.@each","ungroupedSeriesName"),_hasLineData:Ember.computed.notEmpty("lineData"),_hasBarData:Ember.computed.notEmpty("barData"),graphicLeft:Ember.computed.alias("labelWidthOffset"),graphicWidth:Ember.computed(function(){return this.get("width")-this.get("graphicLeft")}).property("width","graphicLeft"),graphicHeight:Ember.computed(function(){return this.get("height")-this.get("legendHeight")-this.get("legendChartPadding")}).property("height","legendHeight","legendChartPadding"),timeDelta:Ember.computed(function(){var e,t,r,i,a;return r=this.get("_groupedBarData"),Ember.isEmpty(r)||2>r.get("length")?"month":(t=r[0][0].time,a=r[1][0].time,i=864e5,e=(a-t)/i,e>351?"year":e>33?"quarter":e>9?"month":e>3?"week":"day")}).property("_groupedBarData"),barDataExtent:Ember.computed(function(){var e,t,r,i,a,n,s,o;return o=this.get("timeDelta"),r=this.get("_groupedBarData"),Ember.isEmpty(r)?[new Date,new Date]:(t=_.first(r),i=_.last(r),s=new Date(t[0].time),e=new Date(i[0].time),n=this._padTimeBackward(s,o),a=this._padTimeForward(e,o),[new Date(n),new Date(a)])}).property("timeDelta","_groupedBarData.@each"),xBetweenGroupDomain:Ember.computed.alias("barDataExtent"),xWithinGroupDomain:Ember.computed.alias("_barGroups"),barWidth:Ember.computed(function(){return this.get("xGroupScale").rangeBand()}).property("xGroupScale"),paddedGroupWidth:Ember.computed(function(){var e,t,r,i;return i=this.get("timeDelta"),e=this.get("xTimeScale"),t=this.get("xBetweenGroupDomain")[0],r="quarter"===i?d3.time.month.offset(t,3):d3.time[i].offset(t,1),e(r)-e(t)}).property("timeDelta","xTimeScale","xBetweenGroupDomain"),lineSeriesNames:Ember.computed(function(){var e;return e=this.get("_groupedLineData"),Ember.isEmpty(e)?[]:e.map(function(e){return e.group})}).property("_groupedLineData"),lineDataExtent:Ember.computed(function(){var e,t;return e=this.get("_groupedLineData"),Ember.isEmpty(e)?[new Date,new Date]:(t=e.getEach("values").map(function(e){return d3.extent(e.map(function(e){return e.time}))}),[d3.min(t,function(e){return e[0]}),d3.max(t,function(e){return e[1]})])}).property("_groupedLineData.@each.values"),xBetweenSeriesDomain:Ember.computed.alias("lineSeriesNames"),xWithinSeriesDomain:Ember.computed.alias("lineDataExtent"),maxNumberOfLabels:Ember.computed(function(e,t){return this.get("dynamicXAxis")?Math.min(null!=t?t:this.get("DEFAULT_MAX_NUMBER_OF_LABELS"),this.get("numXTicks")):this.get("numXTicks")}).property("numXTicks","dynamicXAxis"),xDomain:Ember.computed(function(){var e,t,r,i,a,n;return this.get("_hasBarData")?this.get("_hasLineData")?(a=this.get("xBetweenGroupDomain"),r=a[0],e=a[1],n=this.get("xWithinSeriesDomain"),i=n[0],t=n[1],[Math.min(r,i),Math.max(e,t)]):this.get("xBetweenGroupDomain"):this.get("xWithinSeriesDomain")}).property("xBetweenGroupDomain","xWithinSeriesDomain","_hasBarData","_hasLineData","maxNumberOfLabels"),yDomain:Ember.computed(function(){var e,t,r,i,a,n,s,o,u,l;if(i=this.get("_groupedLineData"),e=this.get("_groupedBarData"),s=d3.max(i,function(e){return d3.max(e.values,function(e){return e.value})}),l=d3.min(i,function(e){return d3.min(e.values,function(e){return e.value})}),n=d3.max(e,function(e){return d3.max(e,function(e){return e.value})}),u=d3.min(e,function(e){return d3.min(e,function(e){return e.value})}),t=this.get("_hasBarData"),r=this.get("_hasLineData"),t?r?(o=Math.min(u,l),a=Math.max(n,s)):(o=u,a=n):(o=l,a=s),this.get("yAxisFromZero")||o===a){if(0>a)return[o,0];if(o>0)return[0,a];if(o===a&&0===a)return[-1,1]}return[o,a]}).property("_groupedLineData","_groupedBarData","_hasBarData","_hasLineData","yAxisFromZero"),yRange:Ember.computed(function(){return[this.get("graphicTop")+this.get("graphicHeight"),this.get("graphicTop")]}).property("graphicTop","graphicHeight"),yScale:Ember.computed(function(){return d3.scale.linear().domain(this.get("yDomain")).range(this.get("yRange")).nice(this.get("numYTicks"))}).property("yDomain","yRange","numYTicks"),xRange:Ember.computed(function(){return[this.get("graphicLeft"),this.get("graphicLeft")+this.get("graphicWidth")]}).property("graphicLeft","graphicWidth"),xTimeScale:Ember.computed(function(){var e;return e=this.get("xDomain"),d3.time.scale().domain(this.get("xDomain")).range(this.get("xRange"))}).property("xDomain","xRange"),xGroupScale:Ember.computed(function(){return d3.scale.ordinal().domain(this.get("xWithinGroupDomain")).rangeRoundBands([0,this.get("paddedGroupWidth")],this.get("barPadding")/2,this.get("barGroupPadding")/2)}).property("xWithinGroupDomain","paddedGroupWidth","barPadding","barGroupPadding"),minAxisValue:Ember.computed(function(){var e;return e=this.get("yScale"),e.domain()[0]}).property("yScale"),maxAxisValue:Ember.computed(function(){var e;return e=this.get("yScale"),e.domain()[1]}).property("yScale"),showDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n,s,o;return d3.select(i).classed("hovered",!0),o=null!=t.labelTime?t.labelTime:t.time,n='<span class="tip-label">'+e.get("formatTime")(o)+"</span>",s=e.get("formatLabelFunction"),a=function(e){return n+='<span class="name">'+e.group+": </span>",n+='<span class="value">'+s(e.value)+"</span><br/>"},Ember.isArray(t.values)?t.values.forEach(a):a(t),e.showTooltip(n,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){return d3.select(i).classed("hovered",!1),e.hideTooltip()}:Ember.K}).property("isInteractive"),zeroDisplacement:1,groupAttrs:Ember.computed(function(){var e=this;return{transform:function(){return"translate("+-e.get("paddedGroupWidth")/2+",0)"}}}).property("paddedGroupWidth"),groupedBarAttrs:Ember.computed(function(){var e,t,r,i;return t=this.get("xTimeScale"),e=this.get("xGroupScale"),r=this.get("yScale"),i=this.get("zeroDisplacement"),{"class":function(e,t){return"grouping-"+t},"stroke-width":0,width:this.get("barWidth"),x:function(r){return e(r.label)+t(r.time)},y:function(e){return e.value>0?r(e.value):r(0)+i},height:function(e){var t;return t=Math.max(0,r.domain()[0]),Math.max(0,e.value>t?Math.abs(r(t)-r(e.value))-i:Math.abs(r(e.value)-r(t))-i)}}}).property("xTimeScale","xGroupScale","barWidth","yScale","zeroDisplacement","barLeftOffset"),line:Ember.computed(function(){var e=this;return d3.svg.line().x(function(t){return e.get("xTimeScale")(t.time)}).y(function(t){return e.get("yScale")(t.value)}).interpolate(this.get("interpolate")?"basis":"linear")}).property("xTimeScale","yScale","interpolate"),lineColorFn:Ember.computed(function(){var e=this;return function(t,r){var i;switch(i=e.get("getSeriesColor"),r){case 0:return i(t,0);case 1:return i(t,2);case 2:return i(t,0);case 3:return i(t,2);case 4:return i(t,0);case 5:return i(t,1);default:return i(t,r)}}}),lineAttrs:Ember.computed(function(){var e,t;return e=this.get("getSeriesColor"),t=this.get("line"),{"class":function(e,t){return"line series-"+t},d:function(e){return t(e.values)},stroke:this.get("lineColorFn"),"stroke-width":function(e,t){switch(t){case 0:return 2;case 1:return 1.5;case 2:return 2;case 3:return 1.5;case 4:return 2.5;case 5:return 2.5;default:return 2}},"stroke-dasharray":function(e,t){switch(t){case 2:case 3:case 5:return"2,2";default:return""}}}}).property("line","getSeriesColor"),numLines:Ember.computed.alias("xBetweenSeriesDomain.length"),numBarsPerGroup:Ember.computed.alias("xWithinGroupDomain.length"),numColorSeries:6,numSecondaryColorSeries:Ember.computed.alias("numBarsPerGroup"),secondaryMinimumTint:Ember.computed(function(){return 0===this.get("numLines")?0:.4}).property("numLines"),secondaryMaximumTint:Ember.computed(function(){return 0===this.get("numLines")?.8:.85}).property("numLines"),hasLegend:Ember.computed(function(){return this.get("legendItems.length")>1&&this.get("showLegend")}).property("legendItems.length","showLegend"),legendItems:Ember.computed(function(){var e,t,r=this;return e=this.get("getSeriesColor"),t=this.get("lineAttrs"),this.get("xBetweenSeriesDomain").map(function(e,r){return{label:e,stroke:t.stroke(e,r),width:t["stroke-width"](e,r),dotted:t["stroke-dasharray"](e,r),icon:function(){return"line"},selector:".series-"+r}}).concat(this.get("xWithinGroupDomain").map(function(e,t){var i;return i=r.get("getSecondarySeriesColor")(e,t),{stroke:i,fill:i,label:e,icon:function(){return"square"},selector:".grouping-"+t}}))}).property("xBetweenSeriesDomain","xWithinGroupDomain","getSeriesColor","getSecondarySeriesColor"),removeAllGroups:function(){return this.get("viewport").selectAll(".bars").remove()},groups:Ember.computed(function(){return this.get("viewport").selectAll(".bars").data(this.get("_groupedBarData"))}).volatile(),removeAllSeries:function(){return this.get("viewport").selectAll(".series").remove()},series:Ember.computed(function(){return this.get("viewport").selectAll(".series").data(this.get("_groupedLineData"))}).volatile(),xAxis:Ember.computed(function(){var e;return e=this.get("viewport").select(".x.axis"),e.empty()?this.get("viewport").insert("g",":first-child").attr("class","x axis"):e}).volatile(),yAxis:Ember.computed(function(){var e;return e=this.get("viewport").select(".y.axis"),e.empty()?this.get("viewport").insert("g",":first-child").attr("class","y axis"):e}).volatile(),renderVars:["barLeftOffset","labelledTicks","xGroupScale","xTimeScale","yScale"],drawChart:function(){return this.updateBarData(),this.updateLineData(),this.updateLineMarkers(),this.updateAxes(),this.updateBarGraphic(),this.updateLineGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},updateAxes:function(){var e,t,r,i,a,n,s;return n=d3.svg.axis().scale(this.get("xTimeScale")).orient("bottom").tickValues(this.get("labelledTicks")).tickSubdivide(this.get("numberOfMinorTicks")).tickFormat(this.get("formattedTime")).tickSize(6,3),a=this.get("graphicTop"),r=this.get("graphicHeight"),e=this.get("xAxis").attr({transform:"translate(0,"+(a+r)+")"}).call(n),s=d3.svg.axis().scale(this.get("yScale")).orient("right").ticks(this.get("numYTicks")).tickSize(this.get("graphicWidth")).tickFormat(this.get("formatValueAxis")),t=this.get("yAxis"),this.set("graphicLeft",this.maxLabelLength(t.selectAll("text"))+this.get("labelPadding")),i=this.get("graphicLeft"),t.attr("transform","translate("+i+",0)").call(s),t.selectAll("g").filter(function(e){return e}).classed("major",!1).classed("minor",!0),t.selectAll("text").style("text-anchor","end").attr({x:-this.get("labelPadding")})},updateBarData:function(){var e,t,r,i;return this.removeAllGroups(),t=this.get("groups"),i=this.get("showDetails"),r=this.get("hideDetails"),t.enter().insert("g",".series").attr("class","bars"),t.exit().remove(),e=t.selectAll("rect").data(function(e){return e}),e.enter().append("rect").on("mouseover",function(e,t){return i(e,t,this)}).on("mouseout",function(e,t){return r(e,t,this)}),e.exit().remove()},updateBarGraphic:function(){var e;return e=this.get("groups"),e.attr(this.get("groupAttrs")),e.selectAll("rect").style("fill",this.get("getSecondarySeriesColor")).attr(this.get("groupedBarAttrs"))},updateLineData:function(){var e;return this.removeAllSeries(),e=this.get("series"),e.enter().append("g").attr("class","series").append("path").attr("class","line"),e.exit().remove()},updateLineGraphic:function(){var e,t;return t=this.get("series"),e=this.get("graphicTop"),t.attr("transform","translate(0, "+e+")"),t.select("path.line").attr(this.get("lineAttrs"))}}),Ember.Handlebars.helper("time-series-chart",Ember.Charts.TimeSeriesComponent)}(),function(){Ember.Charts.BubbleComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.FloatingTooltipMixin,{classNames:["chart-bubble"],layoutGravity:-.01,damper:.1,charge:Ember.computed(function(){return function(e){return-Math.pow(e.radius,2)/8}}),formatLabel:d3.format(",.2f"),showDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){var a,n;return d3.select(i).classed("hovered",!0),n=e.get("formatLabel"),a='<span class="tip-label">'+t.label+"</span>",a+='<span class="name">'+e.get("tooltipValueDisplayName")+": </span>",a+='<span class="value">'+n(t.value)+"</span>",e.showTooltip(a,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var e=this;return this.get("isInteractive")?function(t,r,i){return d3.select(i).classed("hovered",!1),e.hideTooltip()}:Ember.K}).property("isInteractive"),renderVars:["selectedSeedColor"],radiusScale:Ember.computed(function(){var e,t;return e=d3.max(this.data,function(e){return e.value}),t=d3.min([this.get("width"),this.get("height")])/7,d3.scale.pow().exponent(.5).domain([0,e]).range([2,t])}).property("data","width","height"),nodeData:Ember.computed(function(){var e,t,r,i=this;return e=this.get("data"),Ember.isEmpty(e)?[]:(r=this.get("radiusScale"),t=e.map(function(e){return{radius:r(e.value),value:e.value,label:e.label,id:e.label,x:Math.random()*i.get("width")/2,y:Math.random()*i.get("height")/2}}),t.sort(function(e,t){return t.value-e.value}),t)}).property("radiusScale"),finishedData:Ember.computed.alias("nodeData"),numColorSeries:Ember.computed.alias("finishedData.length"),drawChart:function(){return this.updateVis()},updateVis:function(){var e,t,r,i,a,n,s,o,u=this;return o=this.get("viewport"),n=this.get("nodeData"),s=this.get("showDetails"),i=this.get("hideDetails"),t=this.get("getSeriesColor"),e=o.selectAll("circle").data(n,function(e){return e.id}),e.enter().append("circle").attr("r",0).attr("id",function(e){return"bubble_"+e.id}).on("mouseover",function(e,t){return s(e,t,this)}).on("mouseout",function(e,t){return i(e,t,this)}),e.transition().duration(2e3).attr("r",function(e){return e.radius}),e.attr("fill",t).attr("stroke-width",2).attr("stroke",function(e,r){return d3.rgb(t(e,r)).darker()}),e.exit().remove(),a=function(e){var t;return t={x:u.get("width")/2,y:u.get("height")/2},function(r){return r.x=r.x+(t.x-r.x)*(u.get("damper")+.02)*e,r.y=r.y+(t.y-r.y)*(u.get("damper")+.02)*e}},r=d3.layout.force().nodes(n).size([this.get("width"),this.get("height")]),r.gravity(this.get("layoutGravity")).charge(this.get("charge")).friction(.9).on("tick",function(t){return e.each(a(t.alpha)).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})}),r.start(),o.selectAll(".years").remove()}}),Ember.Handlebars.helper("bubble-chart",Ember.Charts.BubbleComponent)}();