/*!
* ember-charts v0.4.0
* Copyright 2012-2015 Addepar Inc.
* See LICENSE.
*/
!function(){var a;Ember.Charts=Ember.Namespace.create(),Ember.Charts.VERSION="0.4.0",null!=(a=Ember.libraries)&&a.register("Ember Charts",Ember.Charts.VERSION)}(),function(){Ember.AddeparMixins=Ember.AddeparMixins||Ember.Namespace.create(),Ember.AddeparMixins.ResizeHandlerMixin=Ember.Mixin.create({resizeEndDelay:200,resizing:!1,onResizeStart:Ember.K,onResizeEnd:Ember.K,onResize:Ember.K,endResize:Ember.computed(function(){return function(a){return this.isDestroyed?void 0:(this.set("resizing",!1),"function"==typeof this.onResizeEnd?this.onResizeEnd(a):void 0)}}),handleWindowResize:function(a){return this.get("resizing")||(this.set("resizing",!0),"function"==typeof this.onResizeStart&&this.onResizeStart(a)),"function"==typeof this.onResize&&this.onResize(a),Ember.run.debounce(this,this.get("endResize"),a,this.get("resizeEndDelay"))},didInsertElement:function(){return this._super(),this._setupDocumentHandlers()},willDestroyElement:function(){return this._removeDocumentHandlers(),this._super()},_setupDocumentHandlers:function(){return this._resizeHandler?void 0:(this._resizeHandler=jQuery.proxy(this.get("handleWindowResize"),this),jQuery(window).on("resize."+this.elementId,this._resizeHandler))},_removeDocumentHandlers:function(){return jQuery(window).off("resize."+this.elementId,this._resizeHandler),this._resizeHandler=null}})}(),function(){Ember.AddeparMixins=Ember.AddeparMixins||Ember.Namespace.create(),Ember.AddeparMixins.StyleBindingsMixin=Ember.Mixin.create({concatenatedProperties:["styleBindings"],attributeBindings:["style"],unitType:"px",createStyleString:function(a,b){var c;return c=this.get(b),void 0!==c?("number"===Ember.typeOf(c)&&(c+=this.get("unitType")),""+a+":"+c+";"):void 0},applyStyleBindings:function(){var a,b,c,d,e,f=this;return(c=this.styleBindings)?(a={},c.forEach(function(b){var c,d,e;e=b.split(":"),c=e[0],d=e[1],a[d||c]=c}),e=Ember.keys(a),b=e.map(function(b){return a[b]}),d=Ember.computed(function(){var b,c;return c=e.map(function(b){return f.createStyleString(b,a[b])}),b=c.join(""),0!==b.length?b:void 0}),d.property.apply(d,b),Ember.defineProperty(this,"style",d)):void 0},init:function(){return this.applyStyleBindings(),this._super()}})}(),function(){Ember.TEMPLATES["components/ember-chart"]=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f,g,h,i,j="",k=c.helperMissing,l=this.escapeExpression;return e.buffer.push("<svg "),g={width:b,height:b},h={width:"STRING",height:"STRING"},i={hash:{width:"outerWidth",height:"outerHeight"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(l((f=c["bind-attr"]||b["bind-attr"],f?f.call(b,i):k.call(b,"bind-attr",i)))),e.buffer.push('>\n  <g class="chart-viewport" '),g={transform:b},h={transform:"STRING"},i={hash:{transform:"transformViewport"},contexts:[],types:[],hashContexts:g,hashTypes:h,data:e},e.buffer.push(l((f=c["bind-attr"]||b["bind-attr"],f?f.call(b,i):k.call(b,"bind-attr",i)))),e.buffer.push("></g>\n</svg>\n"),j})}(),function(){Ember.Charts.Helpers=Ember.Namespace.create({groupBy:function(a,b){var c,d,e,f,g,h,i;for(f={},d=h=0,i=a.length;i>=0?i>h:h>i;d=i>=0?++h:--h)g=a[d],e=b(g,d),c=f[e]||(f[e]=[]),c.push(g);return f},LabelTrimmer:Ember.Object.extend({getLabelSize:function(a,b){return 100},getLabelText:function(a,b){return a.label},trim:Ember.computed(function(){var a,b;return a=this.get("getLabelSize"),b=this.get("getLabelText"),function(c){return c.text(function(d){var e,f,g,h,i;return e=this.getBBox().width,(g=b(d,c))?(f=e/g.length,i=a(d,c)-4*f,h=Math.floor(i/f),0>=h-3?"...":e>i?g.slice(0,h-3)+"...":g):""})}}).property("getLabelSize","getLabelText")})})}(),function(){Ember.Charts.Colorable=Ember.Mixin.create({selectedSeedColor:"rgb(65, 65, 65)",tint:.8,minimumTint:0,maximumTint:.66,colorScaleType:d3.scale.linear,renderVars:["colorScale"],colorRange:Ember.computed(function(){var a;return a=this.get("selectedSeedColor"),this.get("getColorRange")(a)}).property("selectedSeedColor","getColorRange"),getColorRange:Ember.computed(function(){var a=this;return function(b){var c,d,e;return c=d3.interpolateRgb(b,"rgb(255,255,255)"),e=c(a.get("minimumTint")),d=c(a.get("maximumTint")),[d3.rgb(e),d3.rgb(d)]}}).property("minimumTint","maximumTint"),colorScale:Ember.computed(function(){var a;return a=this.get("selectedSeedColor"),this.get("getColorScale")(a)}).property("selectedSeedColor","getColorScale"),getColorScale:Ember.computed(function(){var a=this;return function(b){var c;return c=a.get("getColorRange")(b),a.get("colorScaleType")().range(c)}}).property("getColorRange","colorScaleType"),secondaryMinimumTint:.4,secondaryMaximumTint:.85,secondaryColorScaleType:d3.scale.linear,secondaryColorRange:Ember.computed(function(){var a,b,c,d;return d=this.get("selectedSeedColor"),a=d3.interpolateRgb(d,"rgb(255,255,255)"),c=a(this.get("secondaryMinimumTint")),b=a(this.get("secondaryMaximumTint")),[d3.rgb(c),d3.rgb(b)]}).property("selectedSeedColor","secondaryMinimumTint","secondaryMaximumTint"),secondaryColorScale:Ember.computed(function(){return this.get("secondaryColorScaleType")().range(this.get("secondaryColorRange"))}).property("secondaryColorRange","secondaryColorScaleType"),leastTintedColor:Ember.computed(function(){return this.get("colorRange")[0]}).property("colorRange.@each"),mostTintedColor:Ember.computed(function(){return this.get("colorRange")[1]}).property("colorRange.@each"),numColorSeries:1,getSeriesColor:Ember.computed(function(){var a,b,c=this;return a=this.get("numColorSeries"),b=this.get("selectedSeedColor"),function(d,e){var f,g,h;return h=d.color||b,f=c.get("getColorRange")(h),g=c.get("getColorScale")(h),1===a?f[0]:g(e/(a-1))}}).property("numColorSeries","getColorRange","getColorScale")},"selectedSeedColor",{numSecondaryColorSeries:1,getSecondarySeriesColor:Ember.computed(function(){var a,b=this;return a=this.get("numSecondaryColorSeries"),function(c,d){return 1===a?b.get("secondaryColorRange")[0]:b.get("secondaryColorScale")(d/(a-1))}}).property("numSecondaryColorSeries","secondaryColorRange","secondaryColorScale")})}(),function(){Ember.Charts.Formattable=Ember.Mixin.create({formatLabelFunction:Ember.computed(function(){return d3.format(","+this.get("formatLabel"))}).property("formatLabel"),formatLabel:".2f"})}(),function(){Ember.Charts.AxesMixin=Ember.Mixin.create({graphicWidth:null,graphicHeight:null,minXTicks:3,minYTicks:3,tickSpacing:50,minAxisValue:0,maxAxisValue:0,numXTicks:Ember.computed(function(){var a;return a=Math.floor(this.get("graphicWidth")/this.get("tickSpacing")),Math.max(a,this.get("minXTicks"))}).property("graphicWidth","tickSpacing","minXTicks"),numYTicks:Ember.computed(function(){var a;return a=Math.floor(this.get("graphicHeight")/this.get("tickSpacing")),Math.max(a,this.get("minYTicks"))}).property("graphicHeight","tickSpacing","minYTicks"),formatValueAxis:Ember.computed(function(){var a,b,c;return b=Math.max(Math.abs(this.get("minAxisValue")),Math.abs(this.get("maxAxisValue"))),c=d3.formatPrefix(b),a=function(a){return""+c.scale(a)+c.symbol}}).property("minAxisValue","maxAxisValue")})}(),function(){Ember.Charts.FloatingTooltipMixin=Ember.Mixin.create({elementId:null,tooltipWidth:40,tooltipValueDisplayName:"Value",showTooltip:function(a,b){var c;return c=this._getTooltip(),c.html(a),c.show(),this._updateTooltipPosition(b)},hideTooltip:function(){return this._getTooltip().hide()},_tooltipId:Ember.computed(function(){return this.get("elementId")+"_tooltip"}),_getTooltip:function(){return $("#"+this.get("_tooltipId"))},_updateTooltipPosition:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b=this._getTooltip(),o=10,p=10,l=b.width(),e=b.height(),n=$(window).scrollTop(),m=$(window).scrollLeft(),c=a.clientX+m,d=a.clientY+n,i=c-m+2*o+l>$(window).width()?-(l+2*o):o,h=c+i,k=d-n+2*p+e>$(window).height()?-(e+2*p):p,j=d+k,f=m+o,g=n+p,f>h&&(h=f),n+p>j&&(j=g),b.css("top",j+"px").css("left",h+"px")},didInsertElement:function(){return this._super(),$("body").append("<div class='chart-float-tooltip' id='"+this.get("_tooltipId")+"'></div>"),this.hideTooltip()},willDestroyElement:function(){return this._super(),this._getTooltip().remove()}})}(),function(){Ember.Charts.HasTimeSeriesRule=Ember.Mixin.create({xRange:null,yRange:null,xTimeScale:null,showDetails:null,hideDetails:null,lineColorFn:null,graphicHeight:null,updateLineMarkers:function(){var a,b,c;return b=this._getLineMarkers(),c=this.get("showDetails"),a=this.get("hideDetails"),b.enter().append("path").on("mouseover",function(a,b){return c(a,b,this)}).on("mouseout",function(b,c){return a(b,c,this)}).attr({"class":"line-marker",fill:this.get("lineColorFn"),d:d3.svg.symbol().size(50).type("circle")}),b.exit().remove(),b.attr({transform:function(a){return"translate("+a.x+","+a.y+")"}}),b.style({"stroke-width":function(a){return d3.select(a.path).attr("stroke-width")}})},_getLineMarkers:function(){return this.get("viewport").selectAll(".line-marker").data(this._lineMarkerData())},didInsertElement:function(){var a=this;return this._super(),d3.select(this.$("svg")[0]).on("mousemove",function(){return a.get("isInteractive")&&a._isEventWithinValidRange()?Ember.run(a,a.get("updateLineMarkers")):void 0})},_lineMarkerTolerance:6e4,_mousePosition:function(){return d3.event?d3.mouse(this.get("$viewport")):null},_isEventWithinValidRange:function(){var a,b,c,d,e,f,g;return d=this.get("xRange"),f=this.get("yRange"),g=this._mousePosition(),c=g[0],e=g[1],a=d3.min(d)<c&&c<d3.max(d),b=d3.min(f)<e&&e<d3.max(f),a&&b},_lineMarkerData:function(){var a,b,c,d,e,f;return e=this._mousePosition(),Ember.isEmpty(e)?[]:(a=this.get("xTimeScale").invert,b=this.get("yScale").invert,c=this.get("_lineMarkerTolerance"),f=a(e[0]),d=[],this.get("viewport").selectAll("path.line").each(function(e,g){var h,i,j,k,l,m;for(h=0,i=25,m=0,k=this.getTotalLength(),l=k/2,j=this.getPointAtLength(l);Math.abs(f-a(j.x))>c&&i>++h;)f<a(j.x)?k=l:m=l,l=(m+k)/2,j=this.getPointAtLength(l);return d.push({x:j.x,y:j.y,group:e.group,value:b(j.y),time:a(j.x),path:this})}),d)}})}(),function(){var a,b,c;Ember.Charts.TimeSeriesLabeler=Ember.Mixin.create({centerAxisLabels:!1,selectedInterval:"M",dynamicXAxis:!1,SPECIFICITY_RATIO:.7,minTimeSpecificity:"S",maxTimeSpecificity:"Y",MONTHS_IN_QUARTER:3,xAxisTimeInterval:Ember.computed(function(a,b){var d;return d=this.get("dynamicXAxis")?null!=b?b:"M":this.get("selectedInterval"),d.length>1?c[d]:d}).property("selectedInterval","dynamicXAxis"),maxNumberOfLabels:10,DOMAIN_ORDERING:["S","H","D","W","M","Q","Y"],numberOfMinorTicks:Ember.computed(function(){var b,c,d,e,f,g,h,i,j,k;return g=this.get("labelledTicks"),k=this.get("xDomain"),i=k[0],j=k[1],c=this.get("xAxisTimeInterval"),f="Q"===c?this.MONTHS_IN_QUARTER:1,b=d3.time[a[c]](i,j,f),g.length<2?0:(d=function(a){return function(b){return+b===+a}},h=_.findIndex(b,d(g[1])),e=_.findIndex(b,d(g[0])),h-e-1)}).property("xDomain","xAxisTimeInterval","labelledTicks"),labelledTicks:Ember.computed(function(){var a,b,c,d,e,f,g,h;if(b=this.get("xDomain"),e=this.get("tickLabelerFn")(b[0],b[1]),this.get("centerAxisLabels")){for(a=1,c=this.domainTypeToLongDomainTypeSingular(this.get("xAxisTimeInterval")),"quarter"===c&&(a=this.MONTHS_IN_QUARTER,c="month"),h=[],f=0,g=e.length;g>f;f++)d=e[f],h.push(this._advanceMiddle(d,c,a));return h}return e}).property("xDomain","centerAxisLabels","xAxisTimeInterval"),_advanceMiddle:function(a,b,c){return new Date(a=a.getTime()/2+d3.time[b].offset(a,c)/2)},numTimeBetween:function(a,b,c){switch(a){case"seconds":return(c-b)/1e3;case"hours":return(c-b)/1e3;case"days":return(c-b)/864e5;case"weeks":return d3.time.weeks(b,c).length;case"months":return d3.time.months(b,c).length;case"quarters":return d3.time.months(b,c).length/this.MONTHS_IN_QUARTER;case"years":return d3.time.years(b,c).length}}},a={S:"seconds",H:"hours",D:"days",W:"weeks",M:"months",Q:"months",Y:"years"},b={S:"seconds",H:"hours",D:"days",W:"weeks",M:"months",Q:"quarters",Y:"years"},{domainTypeToLongDomainTypeSingular:function(a){var c;return c=b[a],c.substring(0,c.length-1)}},c={seconds:"S",hours:"H",days:"D",weeks:"W",months:"M",quarters:"Q",years:"Y"},{dynamicXLabelling:function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(i=this.get("DOMAIN_ORDERING").indexOf(this.get("minTimeSpecificity")),j=this.get("DOMAIN_ORDERING").indexOf(this.get("maxTimeSpecificity")),g=this.get("DOMAIN_ORDERING").slice(i,+j+1||9e9),l=function(){var b,c,d;for(d=[],b=0,c=g.length;c>b;b++)f=g[b],d.push(a[f]);return d}(),p=function(){var a,f,h;for(h=[],a=0,f=g.length;f>a;a++)e=g[a],h.push(this.numTimeBetween(b[e],c,d));return h}.call(this),m=null,n=this.get("maxNumberOfLabels"),h=q=0,r=p.length;r>q;h=++q)if(o=p[h],k=null,n>o?k="Q"===g[h]?this.MONTHS_IN_QUARTER:1:(g[h]===this.get("maxTimeSpecificity")||p[h+1]<n*this.get("SPECIFICITY_RATIO"))&&(k="Q"===g[h]?Math.ceil(this.MONTHS_IN_QUARTER*o/n):Math.ceil(o/n)),null!=k){this.set("xAxisTimeInterval",g[h]),m=d3.time[l[h]](c,d).filter(function(a,b){return!(b%k)});break}return m},tickLabelerFn:Ember.computed(function(){var c=this;return this.get("dynamicXAxis")?function(a,b){return c.dynamicXLabelling(a,b)}:function(d,e){var f,g,h;return f=c.get("xAxisTimeInterval"),h=c.numTimeBetween(b[f],d,e),"Q"===f?h>c.get("maxNumberOfLabels")?d3.time.years(d,e):d3.time.months(d,e,c.MONTHS_IN_QUARTER):(g=h>c.get("maxNumberOfLabels")?Math.ceil(h/c.get("maxNumberOfLabels")):1,d3.time[a[f]](d,e).filter(function(a,b){return!(b%g)}))}}).property("dynamicXAxis","maxNumberOfLabels","xAxisTimeInterval")},"SPECIFICITY_RATIO","minTimeSpecificity","maxTimeSpecificity",{quarterFormat:function(a){var b,c,d;return b=a.getMonth()%12,c="",c=3>b?"Q1":6>b?"Q2":9>b?"Q3":"Q4",d=d3.time.format("%Y")(a),c+" "+d},formattedTime:Ember.computed(function(){switch(this.get("xAxisTimeInterval")){case"years":case"Y":return d3.time.format("%Y");case"quarters":case"Q":return this.quarterFormat;case"months":case"M":return d3.time.format("%b '%y");case"weeks":case"W":return d3.time.format("%-m/%-d/%y");case"days":case"D":return d3.time.format("%-m/%-d/%y");case"hours":case"H":return d3.time.format("%H:%M:%S");case"seconds":case"S":return d3.time.format("%H:%M:%S");default:return d3.time.format("%Y")}}).property("xAxisTimeInterval")})}(),function(){Ember.Charts.Legend=Ember.Mixin.create({legendTopPadding:10,legendItemHeight:18,minLegendItemWidth:120,maxLegendItemWidth:160,legendIconRadius:9,legendLabelPadding:10,showLegend:!0,legendWidth:Ember.computed.alias("width"),legendHeight:Ember.computed(function(){return this.get("numLegendRows")*this.get("legendItemHeight")}).property("numLegendRows","legendItemHeight"),legendItemWidth:Ember.computed(function(){var a;return a=this.get("legendWidth")/this.get("legendItems.length"),a<this.get("minLegendItemWidth")?this.get("minLegendItemWidth"):a>this.get("maxLegendItemWidth")?this.get("maxLegendItemWidth"):a}).property("legendWidth","minLegendItemWidth","maxLegendItemWidth","legendItems.length"),numLegendItemsPerRow:Ember.computed(function(){return Math.floor(this.get("legendWidth")/this.get("legendItemWidth"))}).property("legendWidth","legendItemWidth"),numLegendRows:Ember.computed(function(){return Math.ceil(this.get("legendItems.length")/this.get("numLegendItemsPerRow"))}).property("legendItems.length","numLegendItemsPerRow"),legendLabelWidth:Ember.computed(function(){return this.get("legendItemWidth")-this.get("legendIconRadius")-2*this.get("legendLabelPadding")}).property("legendItemWidth","legendIconRadius","legendLabelPadding"),legendChartPadding:0,averageLegendLabelWidth:0,legendAttrs:Ember.computed(function(){var a,b,c;return a=this.get("outerWidth")/2,c=this.get("legendChartPadding")+this.get("legendTopPadding"),b=this.get("graphicBottom")+c,{transform:"translate("+a+", "+b+")"}}).property("outerWidth","graphicBottom","legendTopPadding","legendChartPadding"),legendItemAttrs:Ember.computed(function(){var a,b,c,d,e,f=this;return c=this.get("legendItemWidth"),b=this.get("legendItemHeight"),e=this.get("numLegendItemsPerRow"),d=this.get("legendItems.length"),a=1===this.get("numLegendRows"),{"class":"legend-item",width:c,"stroke-width":0,transform:function(g,h){var i,j,k,l,m;return i=h%e,m=Math.floor(h/e),l=a?d:e,j=i*c-l/2*c+f.get("averageLegendLabelWidth")/2,k=m*b+b/2,"translate("+j+", "+k+")"}}}).property("legendItemWidth","legendItemHeight","numLegendItemsPerRow","legendItems.length","numLegendRows","averageLegendLabelWidth"),legendIconAttrs:Ember.computed(function(){var a,b;return a=this.get("legendIconRadius"),b=this.get("legendItemHeight"),{d:function(b,c){return"line"===b.icon(b)?"M "+-a+" 0 L "+a+" 0":d3.svg.symbol().type(b.icon(b,c)).size(Math.pow(a,2))(b,c)},fill:function(a,b){return _.isFunction(a.fill)?a.fill(a,b):a.fill},stroke:function(a,b){return _.isFunction(a.stroke)?a.stroke(a,b):a.stroke},"stroke-width":function(a){return a.width?_.isFunction(a.width)?a.width(a,i):a.width:1.5},"stroke-dasharray":function(a){return a.dotted?"2,2":void 0}}}).property("legendIconRadius","legendItemHeight"),legendLabelAttrs:Ember.computed(function(){return{x:this.get("legendIconRadius")/2+this.get("legendLabelPadding"),y:".35em"}}).property("legendIconRadius","legendLabelPadding","legendItemHeight"),showLegendDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f,g;return d3.select(d).classed("hovered",!0),b.selector&&a.get("viewport").selectAll(b.selector).classed("hovered",!0),e='<span class="tip-label">'+b.label+"</span>",null!=b.xValue&&(f=a.get("formatXValue"),g=a.get("formatYValue"),e+='<span class="name">'+a.get("tooltipXValueDisplayName")+": </span>",e+='<span class="value">'+f(b.xValue)+"</span><br/>",e+='<span class="name">'+a.get("tooltipYValueDisplayName")+": </span>",e+='<span class="value">'+g(b.yValue)+"</span>"),a.showTooltip(e,d3.event)}:Ember.K}).property("isInteractive"),hideLegendDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){return d3.select(d).classed("hovered",!1),b.selector&&a.get("viewport").selectAll(b.selector).classed("hovered",!1),a.hideTooltip()}:Ember.K}).property("isInteractive"),clearLegend:function(){return this.get("viewport").select(".legend-container").remove()},legend:Ember.computed(function(){var a;return a=this.get("viewport").select(".legend-container"),a.empty()?this.get("viewport").append("g").attr("class","legend-container"):a})["volatile"](),drawLegend:function(){var a,b,c,d,e,f,g,h,i,j,k;if(this.get("showLegend"))return this.clearLegend(),e=this.get("legend"),e.attr(this.get("legendAttrs")),i=this.get("showLegendDetails"),a=this.get("hideLegendDetails"),g=e.selectAll(".legend-item").data(this.get("legendItems")).enter().append("g").attr(this.get("legendItemAttrs")).on("mouseover",function(a,b){return i(a,b,this)}).on("mouseout",function(b,c){return a(b,c,this)}),f=this.get("legendIconAttrs"),b=this.get("isShowingTotal"),k=this.get("totalPointShape"),g.each(function(a,c){var d;return d=d3.select(this),0===c&&b?d.append("g").attr("class","icon").call(k):d3.select(this).append("path").attr("class","icon").attr(f)}),h=this.get("legendLabelWidth"),c=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(a){return h},getLabelText:function(a){return a.label}}),d=g.append("text").style("text-anchor","start").text(function(a){return a.label}).attr(this.get("legendLabelAttrs")).call(c.get("trim")),j=0,e.selectAll("text").each(function(){return j+=this.getComputedTextLength()}),this.set("averageLegendLabelWidth",j/this.get("legendItems.length"))}})}(),function(){Ember.Charts.PieLegend=Ember.Mixin.create({legendVerticalPadding:30,legendHorizontalPadding:Ember.computed(function(){return.2*this.get("outerWidth")}).property("outerWidth"),maxLabelHeight:Ember.computed(function(){return.05*this.get("outerHeight")}).property("outerWidth","outerHeight"),showLegend:!0,legendWidth:Ember.computed(function(){return this.get("outerWidth")-this.get("legendHorizontalPadding")}).property("outerWidth","legendHorizontalPadding"),legendHeight:Ember.computed(function(){return this.get("maxLabelHeight")+2*this.get("legendVerticalPadding")}).property("maxLabelHeight","legendVerticalPadding"),legendAttrs:Ember.computed(function(){var a,b,c;return a=0,c=.15*this.get("marginBottom")-this.get("marginTop")/2,b=this.get("outerHeight")/2+c,{transform:"translate("+a+", "+b+")"}}).property("outerHeight","marginTop","marginBottom"),legendLabelAttrs:Ember.computed(function(){return{style:"text-anchor:middle;",y:"-.35em"}}),legend:Ember.computed(function(){var a;return a=this.get("viewport").select(".legend"),a.empty()?this.get("viewport").append("g").attr("class","legend"):a})["volatile"](),clearLegend:function(){return this.get("viewport").select(".legend .labels").remove()},drawLegend:function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.get("showLegend")){for(this.clearLegend(),e=this.get("legend").attr(this.get("legendAttrs")),g=this.get("viewport").select(".other-slice"),this.get("isInteractive")&&!g.empty()&&e.on("mouseover",function(){return g.classed("hovered",!0),e.classed("hovered",!0)}).on("mouseout",function(){return g.classed("hovered",!1),e.classed("hovered",!1)}),d=e.append("g").attr("class","labels"),b=this.get("legendItems").map(function(a){return null!=a.percent?""+a.label+" ("+a.percent+"%)":a.label}),h=d.append("text").text("Other: "+b[0]).attr(this.get("legendLabelAttrs")),c=0,l=b.slice(1),j=0,k=l.length;k>j;j++)if(f=l[j],a=h.text(),h.text(""+a+", "+f),i=h.node(),i.getBBox().width>this.get("legendWidth")){if(c+i.getBBox().height>this.get("maxLabelHeight")){h.text(""+a+", ...");break}h.text(""+a+","),c+=i.getBBox().height,h=d.append("text").text(f).attr(this.get("legendLabelAttrs")).attr("dy",c)}return d.attr("transform","translate(0, "+-c+")")}}})}(),function(){Ember.Charts.ChartComponent=Ember.Component.extend(Ember.Charts.Colorable,Ember.AddeparMixins.ResizeHandlerMixin,{layoutName:"components/ember-chart",classNames:["chart-frame","scroll-y"],isInteractive:!0,horizontalMargin:30,verticalMargin:30,marginRight:Ember.computed.alias("horizontalMargin"),marginLeft:Ember.computed.alias("horizontalMargin"),marginTop:Ember.computed.alias("verticalMargin"),marginBottom:Ember.computed.alias("verticalMargin"),defaultOuterHeight:500,defaultOuterWidth:700,outerHeight:Ember.computed.alias("defaultOuterHeight"),outerWidth:Ember.computed.alias("defaultOuterWidth"),width:Ember.computed(function(){return this.get("outerWidth")-this.get("marginLeft")-this.get("marginRight")}).property("outerWidth","marginLeft","marginRight"),height:Ember.computed(function(){return Math.max(1,this.get("outerHeight")-this.get("marginBottom")-this.get("marginTop"))}).property("outerHeight","marginBottom","marginTop"),$viewport:Ember.computed(function(){return this.$(".chart-viewport")[0]}),viewport:Ember.computed(function(){return d3.select(this.get("$viewport"))}),transformViewport:Ember.computed(function(){return"translate("+this.get("marginLeft")+","+this.get("marginTop")+")"}).property("marginLeft","marginTop"),labelPadding:10,labelWidth:30,labelHeight:15,labelWidthOffset:Ember.computed(function(){return this.get("labelWidth")+this.get("labelPadding")}).property("labelWidth","labelPadding"),labelHeightOffset:Ember.computed(function(){return this.get("labelHeight")+this.get("labelPadding")}).property("labelHeight","labelPadding"),graphicTop:0,graphicLeft:0,graphicWidth:Ember.computed.alias("width"),graphicHeight:Ember.computed.alias("height"),graphicBottom:Ember.computed(function(){return this.get("graphicTop")+this.get("graphicHeight")}).property("graphicTop","graphicHeight"),graphicRight:Ember.computed(function(){return this.get("graphicLeft")+this.get("graphicWidth")}).property("graphicLeft","graphicWidth"),hasNoData:Ember.computed(function(){return Ember.isEmpty(this.get("finishedData"))}).property("finishedData"),concatenatedProperties:["renderVars"],renderVars:["finishedData","width","height","margin","isInteractive"],init:function(){var a,b,c,d,e;for(this._super(),d=this.get("renderVars").uniq(),e=[],b=0,c=d.length;c>b;b++)a=d[b],this.addObserver(a,this.drawOnce),e.push(this.get(a));return e},willDestroyElement:function(){var a,b,c,d;for(d=this.get("renderVars").uniq(),b=0,c=d.length;c>b;b++)a=d[b],this.removeObserver(a,this,this.drawOnce);return this._super()},didInsertElement:function(){return this._super(),this._updateDimensions(),this.drawOnce()},drawOnce:function(){return Ember.run.once(this,this.get("draw"))},onResizeEnd:function(){return this._updateDimensions()},_updateDimensions:function(){return this.set("defaultOuterHeight",this.$().height()),this.set("defaultOuterWidth",this.$().width())},clearChart:function(){return this.$(".chart-viewport").children().remove()},draw:function(){return"inDOM"===(this._state||this.state)?this.get("hasNoData")?this.clearChart():this.drawChart():void 0}})}(),function(){Ember.Charts.SortableChartMixin=Ember.Mixin.create({sortKey:"value",sortAscending:!0,sortedData:Ember.computed(function(){var a,b,c;return a=this.get("data"),b=this.get("sortKey"),c=this.get("sortAscending"),Ember.isEmpty(a)?[]:null!=b?c?a.sortBy(b):a.sortBy(b).reverse():a}).property("data.[]","sortKey","sortAscending")})}(),function(){Ember.Charts.NoMarginChartMixin=Ember.Mixin.create({marginLeft:0,marginRight:0,marginBottom:Ember.computed(function(){return this.get("hasLegend")?30:0}).property("hasLegend"),maxLabelLength:function(a){var b;return b=0,a.each(function(){return this.getComputedTextLength()>b?b=this.getComputedTextLength():void 0}),b}})}(),function(){Ember.Charts.HorizontalBarComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.FloatingTooltipMixin,Ember.Charts.Formattable,Ember.Charts.SortableChartMixin,{classNames:["chart-horizontal-bar"],defaultOuterHeight:500,labelWidth:Ember.computed(function(){return.25*this.get("outerWidth")}).property("outerWidth"),labelPadding:20,barPadding:.2,maxBarThickness:60,minBarThickness:20,finishedData:Ember.computed.alias("sortedData"),minOuterHeight:Ember.computed(function(){var a;return a=this.get("numBars")*this.get("minBarThickness"),a+this.get("marginTop")+this.get("marginBottom")}).property("numBars","minBarThickness","marginTop","marginBottom"),maxOuterHeight:Ember.computed(function(){var a;return a=this.get("numBars")*this.get("maxBarThickness"),a+this.get("marginTop")+this.get("marginBottom")}).property("numBars","maxBarThickness","marginTop","marginBottom"),outerHeight:Ember.computed(function(){var a;return a=d3.max([this.get("defaultOuterHeight"),this.get("minOuterHeight")]),d3.min([a,this.get("maxOuterHeight")])}).property("minOuterHeight","maxOuterHeight","defaultOuterHeight"),marginTop:Ember.computed.alias("labelPadding"),marginBottom:Ember.computed.alias("labelPadding"),horizontalMargin:Ember.computed(function(){return this.get("labelWidth")+2*this.get("labelPadding")}).property("labelWidth","labelPadding"),numBars:Ember.computed.alias("finishedData.length"),xDomain:Ember.computed(function(){var a,b,c,d;return d=this.get("finishedData").map(function(a){return a.value}),c=d3.min(d),b=d3.max(d),0>c?(a=Math.max(-c,b),[-a,a]):[0,b]}).property("finishedData","xDomainPadding"),xScale:Ember.computed(function(){return d3.scale.linear().domain(this.get("xDomain")).range([0,this.get("width")]).nice()}).property("width","xDomain"),yScale:Ember.computed(function(){return d3.scale.ordinal().domain(d3.range(this.get("numBars"))).rangeRoundBands([0,this.get("height")],this.get("barPadding"))}).property("height","barPadding"),barThickness:Ember.computed(function(){return this.get("yScale").rangeBand()}).property("yScale"),showDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f;return d3.select(d).classed("hovered",!0),f=a.get("formatLabelFunction"),e='<span class="tip-label">'+b.label+"</span>",e+='<span class="name">'+a.get("tooltipValueDisplayName")+": </span>",e+='<span class="value">'+f(b.value)+"</span>",a.showTooltip(e,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){return d3.select(d).classed("hovered",!1),a.hideTooltip()}:Ember.K}).property("isInteractive"),groupAttrs:Ember.computed(function(){var a,b;return a=this.get("xScale"),b=this.get("yScale"),{transform:function(c,d){var e;return e=Math.min(0,c.value),"translate("+a(e)+", "+b(d)+")"}}}).property("xScale","yScale"),barAttrs:Ember.computed(function(){var a,b=this;return a=this.get("xScale"),{width:function(b){return Math.abs(a(b.value)-a(0))},height:this.get("barThickness"),"stroke-width":0,style:function(a){var c;return a.color?"fill:"+a.color:(c=a.value<0?b.get("mostTintedColor"):b.get("leastTintedColor"),"fill:"+c)}}}).property("xScale","mostTintedColor","leastTintedColor","barThickness"),valueLabelAttrs:Ember.computed(function(){var a,b=this;return a=this.get("xScale"),{x:function(c){return c.value<0?-b.get("labelPadding"):a(c.value)-a(0)+b.get("labelPadding")},y:this.get("barThickness")/2,dy:".35em","text-anchor":function(a){return a.value<0?"end":"start"},"stroke-width":0}}).property("xScale","barThickness","labelPadding"),groupLabelAttrs:Ember.computed(function(){var a,b=this;return a=this.get("xScale"),{x:function(c){return c.value<0?a(0)-a(c.value)+b.get("labelPadding"):-b.get("labelPadding")},y:this.get("barThickness")/2,dy:".35em","text-anchor":function(a){return a.value<0?"start":"end"},"stroke-width":0}}).property("xScale","barThickness","labelPadding"),axisAttrs:Ember.computed(function(){var a;return a=this.get("xScale"),{x1:a(0),x2:a(0),y1:0,y2:this.get("height")}}).property("xScale","height"),groups:Ember.computed(function(){return this.get("viewport").selectAll(".bar").data(this.get("finishedData"))})["volatile"](),yAxis:Ember.computed(function(){var a;return a=this.get("viewport").select(".y.axis line"),a.empty()?this.get("viewport").insert("g",":first-child").attr("class","y axis").append("line"):a})["volatile"](),renderVars:["barThickness","yScale","finishedData","colorRange"],drawChart:function(){return this.updateData(),this.updateAxes(),this.updateGraphic()},updateData:function(){var a,b,c,d;return b=this.get("groups"),d=this.get("showDetails"),c=this.get("hideDetails"),a=b.enter().append("g").attr("class","bar").on("mouseover",function(a,b){return d(a,b,this)}).on("mouseout",function(a,b){return c(a,b,this)}),a.append("rect"),a.append("text").attr("class","value"),a.append("text").attr("class","group"),b.exit().remove()},updateAxes:function(){return this.get("yAxis").attr(this.get("axisAttrs"))},updateGraphic:function(){var a,b,c,d=this;return a=this.get("groups").attr(this.get("groupAttrs")),a.select("rect").attr(this.get("barAttrs")),a.select("text.value").text(function(a){return d.get("formatLabelFunction")(a.value)}).attr(this.get("valueLabelAttrs")),c=this.get("labelWidth"),b=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(a){return c},getLabelText:function(a){return a.label}}),a.select("text.group").text(function(a){return a.label}).attr(this.get("groupLabelAttrs")).call(b.get("trim"))}}),Ember.Handlebars.helper("horizontal-bar-chart",Ember.Charts.HorizontalBarComponent)}(),function(){Ember.Charts.PieComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.PieLegend,Ember.Charts.FloatingTooltipMixin,Ember.Charts.Formattable,Ember.Charts.SortableChartMixin,{classNames:["chart-pie"],minSlicePercent:5,maxNumberOfSlices:8,labelWidth:Ember.computed(function(){return.25*this.get("outerWidth")}).property("outerWidth"),maxRadius:2e3,minimumTopBottomMargin:0,filteredData:Ember.computed(function(){var a;return a=this.get("data"),Ember.isEmpty(a)?[]:a.filter(function(a){return a.value>=0})}).property("data.@each"),rejectedData:Ember.computed(function(){var a;return a=this.get("data"),Ember.isEmpty(a)?[]:a.filter(function(a){return a.value<0})}).property("data.@each"),sortedData:Ember.computed(function(){var a,b;return a=this.get("filteredData"),b=a.reduce(function(a,b){return b.value+a},0),0===b?[]:(a=a.map(function(a){return{color:a.color,label:a.label,
value:a.value,percent:d3.round(100*a.value/b)}}),_.sortBy(a,this.get("sortKey")))}).property("filteredData","sortKey"),sortedDataWithOther:Ember.computed(function(){var a,b,c,d,e,f,g,h,i,j;return a=_.cloneDeep(this.get("sortedData")).reverse(),d=this.get("maxNumberOfSlices"),e=this.get("minNumberOfSlices"),f=this.get("minSlicePercent"),g=[],h={label:"Other",percent:0,_otherItems:g},c=_.indexOf(a,_.find(a,function(a){return a.percent<f})),0>c?c=a.length:(_.rest(a,c).forEach(function(a){return g.push(a),h.percent+=a.percent}),h.percent<f&&(b=a[c-1],b.percent<f&&(c-=1,g.push(b),h.percent+=b.percent))),h.percent>0&&(d-=1),j=_.first(a,c),i=_.rest(j,d),i.length>0&&(i.forEach(function(a){return g.push(a),h.percent+=a.percent}),j=_.first(j,d)),1===g.length?j.push(g[0]):h.percent>0&&j.push(h),j.reverse()}).property("sortedData","maxNumberOfSlices","minSlicePercent"),otherData:Ember.computed(function(){var a,b,c;return b=_.find(this.get("sortedDataWithOther"),function(a){return a._otherItems}),a=null!=(c=null!=b?b._otherItems:void 0)?c:[],_.sortBy(a,this.get("sortFunction")).reverse()}).property("sortedDataWithOther.[]","sortFunction"),otherDataValue:Ember.computed(function(){var a,b;return b=0,a=this.get("otherData"),null!=a&&a.forEach(function(a){return b+=a.value}),b}).property("otherData.[]"),finishedData:Ember.computed.alias("sortedDataWithOther"),horizontalMargin:Ember.computed(function(){return this.get("labelPadding")+this.get("labelWidth")}).property("labelPadding","labelWidth"),_marginBottom:Ember.computed(function(){return this.get("hasLegend")?this.get("legendHeight"):this.get("marginTop")}).property("legendHeight","hasLegend","marginTop"),marginBottom:Ember.computed(function(){return Math.max(this.get("_marginBottom"),this.get("minimumTopBottomMargin"))}).property("_marginBottom","minimumTopBottomMargin"),_marginTop:Ember.computed(function(){return Math.max(1,.1*this.get("outerHeight"))}).property("outerHeight"),marginTop:Ember.computed(function(){return Math.max(this.get("_marginTop"),this.get("minimumTopBottomMargin"))}).property("_marginTop","minimumTopBottomMargin"),numSlices:Ember.computed.alias("finishedData.length"),startOffset:Ember.computed(function(){var a,b;return a=this.get("finishedData"),b=a.reduce(function(a,b){return b.percent+a},0),_.last(a).percent/b*2*Math.PI}).property("finishedData"),radius:Ember.computed(function(){return d3.min([this.get("maxRadius"),this.get("width")/2,this.get("height")/2])}).property("maxRadius","width","height"),labelRadius:Ember.computed(function(){return this.get("radius")+this.get("labelPadding")}).property("radius","labelPadding"),getSliceColor:Ember.computed(function(){var a=this;return function(b,c){var d,e,f;return(null!=(f=b.data)?f.color:void 0)?b.data.color:(e=a.get("numSlices"),d=e-c-1,1!==e&&(d/=e-1),a.get("colorScale")(d))}}).property("numSlices","colorScale"),legendItems:Ember.computed(function(){return this.get("otherData").concat(this.get("rejectedData"))}).property("otherData","rejectedData"),hasLegend:Ember.computed(function(){return this.get("legendItems.length")>0&&this.get("showLegend")}).property("legendItems.length","showLegend"),showDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f,g,h;return d3.select(d).classed("hovered",!0),f=b.data,h=f._otherItems?a.get("otherDataValue"):f.value,g=a.get("formatLabelFunction"),e='<span class="tip-label">'+f.label+"</span>",e+='<span class="name">'+a.get("tooltipValueDisplayName")+": </span>",e+='<span class="value">'+g(h)+"</span>",a.showTooltip(e,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e;return d3.select(d).classed("hovered",!1),e=b.data,e._otherItems?a.get("viewport").select(".legend").classed("hovered",!1):a.hideTooltip()}:Ember.K}).property("isInteractive"),transformViewport:Ember.computed(function(){var a,b;return a=this.get("marginLeft")+this.get("width")/2,b=this.get("marginTop")+this.get("height")/2,"translate("+a+","+b+")"}).property("marginLeft","marginTop","width","height"),arc:Ember.computed(function(){return d3.svg.arc().outerRadius(this.get("radius")).innerRadius(0)}).property("radius"),pie:Ember.computed(function(){return d3.layout.pie().startAngle(this.get("startOffset")).endAngle(this.get("startOffset")+2*Math.PI).sort(null).value(function(a){return a.percent})}).property("startOffset"),groupAttrs:Ember.computed(function(){return{"class":function(a){return a.data._otherItems?"arc other-slice":"arc"}}}),sliceAttrs:Ember.computed(function(){return{d:this.get("arc"),fill:this.get("getSliceColor"),stroke:this.get("getSliceColor")}}).property("arc","getSliceColor"),labelAttrs:Ember.computed(function(){var a,b,c,d,e;return a=this.get("arc"),c=this.get("labelRadius"),e={left:[],right:[]},b=function(a,b,c){var d,f,g,h;for(f=e[a],g=0,h=f.length;h>g;g++)if(d=f[g],Math.abs(b-d)<c)return!0;return!1},this.get("numSlices")>1?{dy:".35em",style:null,"stroke-width":0,"text-anchor":function(a){var b;return b=.5*(a.endAngle-a.startAngle)+a.startAngle,Math.PI<b&&b<2*Math.PI?"end":"start"},transform:function(d){var f,g,h,i,j,k,l,m;return m=a.centroid(d),k=m[0],l=m[1],f=function(a){return a/Math.sqrt(k*k+l*l)*c},h=f(k),i=f(l),g=this.getBBox().height,j=h>0?"right":"left",b(j,i,g)&&(i="right"===j?_.max(e[j])+g:_.min(e[j])-g),e[j].push(i),"translate("+h+","+i+")"}}:(d=this.get("mostTintedColor"),{dy:".71em","stroke-width":0,"text-anchor":"middle",transform:null,style:"fill:"+d+";"})}).property("arc","labelRadius","numSlices","mostTintedColor"),groups:Ember.computed(function(){var a;return a=this.get("pie")(this.get("finishedData")),this.get("viewport").selectAll(".arc").data(a)})["volatile"](),renderVars:["radius","labelWidth","finishedData"],drawChart:function(){return this.updateData(),this.updateGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},updateData:function(){var a,b,c,d;return b=this.get("groups"),d=this.get("showDetails"),c=this.get("hideDetails"),a=b.enter().append("g").attr({"class":"arc"}).on("mouseover",function(a,b){return d(a,b,this)}).on("mouseout",function(a,b){return c(a,b,this)}),a.append("path").attr("class","slice"),a.append("text").attr("class","data"),b.exit().remove()},updateGraphic:function(){var a,b,c;return a=this.get("groups").attr(this.get("groupAttrs")),a.select("path").attr(this.get("sliceAttrs")),c=this.get("labelWidth"),b=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(a){return c},getLabelText:function(a){return a.data.label}}),a.select("text.data").text(function(a){return a.data.label}).attr(this.get("labelAttrs")).call(b.get("trim")).text(function(a){return""+this.textContent+", "+a.data.percent+"%"})}}),Ember.Handlebars.helper("pie-chart",Ember.Charts.PieComponent)}(),function(){Ember.Charts.VerticalBarComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.Legend,Ember.Charts.FloatingTooltipMixin,Ember.Charts.AxesMixin,Ember.Charts.Formattable,Ember.Charts.SortableChartMixin,Ember.Charts.NoMarginChartMixin,{classNames:["chart-vertical-bar"],ungroupedSeriesName:"Other",stackBars:!1,withinGroupPadding:0,betweenGroupPadding:Ember.computed(function(){var a;return(a=d3.scale.linear().domain([1,8]).range([1.25,.25]).clamp(!0))(this.get("numBars"))}).property("numBars"),numBars:Ember.computed(function(){return this.get("xBetweenGroupDomain.length")*this.get("xWithinGroupDomain.length")||0}).property("xBetweenGroupDomain","xWithinGroupDomain"),maxLabelHeight:50,sortedData:Ember.computed(function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.get("stackBars")){a=this.get("data"),e=_.groupBy(a,function(a){return a.group}),j=[];for(b in e)c=e[b],null!==b&&j.pushObject({group:b,value:c.reduce(function(a,b,c){return a+b.value},0)});if(f=this.get("sortKey"),h=this.get("sortAscending"),Ember.isEmpty(j))return[];if(null!=f){for(i=j.sortBy(f),h||(i=i.reverse()),g=[],k=0,l=i.length;l>k;k++)d=i[k],g.pushObjects(e[d.group]);return g}return a}return this._super()}).property("data.[]","sortKey","sortAscending","stackBars"),groupedData:Ember.computed(function(){var a,b,c,d,e,f=this;if(a=this.get("sortedData"),Ember.isEmpty(a))return[];for(a=Ember.Charts.Helpers.groupBy(a,function(a){var b;return null!=(b=a.group)?b:f.get("ungroupedSeriesName")}),e=_.keys(a),c=0,d=e.length;d>c;c++)b=e[c],a[b]=a[b].sortBy("label");return a}).property("sortedData","ungroupedSeriesName"),groupNames:Ember.computed(function(){var a,b,c,d;c=this.get("groupedData"),d=[];for(a in c)b=c[a],d.push(a);return d}).property("groupedData"),isGrouped:Ember.computed(function(){return this.get("groupNames.length")>1}).property("groupNames.length"),finishedData:Ember.computed(function(){var a,b,c,d,e,f,g,h,i,j,k;if(this.get("isGrouped")){if(Ember.isEmpty(this.get("groupedData")))return[];h=this.get("groupedData"),j=[];for(b in h)d=h[b],e=0,c=function(){var b,c,f;for(f=[],b=0,c=d.length;c>b;b++)a=d[b],f.push({y0:e,y1:e+=Math.max(a.value,0),value:a.value,group:a.group,label:a.label,color:a.color});return f}(),j.push({group:b,values:d,stackedValues:c,totalValue:e});return j}if(this.get("stackBars"))return Ember.isEmpty(this.get("data"))?[]:(e=0,c=function(){var b,c,d,f;for(d=this.get("data"),f=[],b=0,c=d.length;c>b;b++)a=d[b],f.push({y0:e,y1:e+=Math.max(a.value,0)});return f}.call(this),[{group:this.get("data.firstObject.group"),values:this.get("data"),stackedValues:c,totalValue:e}]);if(Ember.isEmpty(this.get("data")))return[];for(i=this.get("sortedData"),k=[],f=0,g=i.length;g>f;f++)a=i[f],k.push({group:a.label,values:[a]});return k}).property("groupedData","isGrouped","stackBars","sortedData"),labelHeightOffset:Ember.computed(function(){var a;return a=this.get("_shouldRotateLabels")?this.get("maxLabelHeight"):this.get("labelHeight"),a+this.get("labelPadding")}).property("_shouldRotateLabels","maxLabelHeight","labelHeight","labelPadding"),legendChartPadding:Ember.computed.alias("labelHeightOffset"),graphicLeft:Ember.computed.alias("labelWidthOffset"),graphicWidth:Ember.computed(function(){return this.get("width")-this.get("labelWidthOffset")}).property("width","labelWidthOffset"),graphicHeight:Ember.computed(function(){return this.get("height")-this.get("legendHeight")-this.get("legendChartPadding")}).property("height","legendHeight","legendChartPadding"),yDomain:Ember.computed(function(){var a,b,c,d,e,f,g;return a=this.get("finishedData"),f=d3.min(a,function(a){return _.min(a.values.map(function(a){return a.value}))}),c=d3.max(a,function(a){return _.max(a.values.map(function(a){return a.value}))}),d=d3.max(a,function(a){return a.totalValue}),g=d3.min(a,function(a){return 0}),this.get("stackBars")?(e=g,b=d):(e=f,b=c),e>0?[0,b]:0>b?[e,0]:e===b&&0===b?[0,1]:[e,b]}).property("finishedData","stackBars"),yScale:Ember.computed(function(){return d3.scale.linear().domain(this.get("yDomain")).range([this.get("graphicTop")+this.get("graphicHeight"),this.get("graphicTop")]).nice(this.get("numYTicks"))}).property("graphicTop","graphicHeight","yDomain","numYTicks"),individualBarLabels:Ember.computed(function(){var a;return a=_.values(this.get("groupedData")).map(function(a){return _.pluck(a,"label")}),_.uniq(_.flatten(a))}).property("groupedData.@each"),labelIDMapping:Ember.computed(function(){return this.get("individualBarLabels").reduce(function(a,b,c){return a[b]=c,a},{})}).property("individualBarLabels.[]"),xBetweenGroupDomain:Ember.computed.alias("groupNames"),xWithinGroupDomain:Ember.computed.alias("individualBarLabels"),groupWidth:Ember.computed(function(){return this.get("xBetweenGroupScale").rangeBand()}).property("xBetweenGroupScale"),barWidth:Ember.computed(function(){return this.get("xWithinGroupScale").rangeBand()}).property("xWithinGroupScale"),xWithinGroupScale:Ember.computed(function(){return this.get("isGrouped")||this.get("stackBars")?d3.scale.ordinal().domain(this.get("xWithinGroupDomain")).rangeRoundBands([0,this.get("groupWidth")],this.get("withinGroupPadding")/2,0):d3.scale.ordinal().domain(this.get("xWithinGroupDomain")).rangeRoundBands([0,this.get("groupWidth")],this.get("betweenGroupPadding")/2,this.get("betweenGroupPadding")/2)}).property("isGrouped","stackBars","xWithinGroupDomain","groupWidth","withinGroupPadding","betweenGroupPadding"),xBetweenGroupScale:Ember.computed(function(){var a,b;return b=this.get("labelWidth"),a=this.get("isGrouped")||this.get("stackBars")?this.get("betweenGroupPadding"):0,d3.scale.ordinal().domain(this.get("xBetweenGroupDomain")).rangeRoundBands([0,this.get("graphicWidth")],a/2,a/2)}).property("isGrouped","stackBars","graphicWidth","labelWidth","xBetweenGroupDomain","betweenGroupPadding"),minAxisValue:Ember.computed(function(){var a;return a=this.get("yScale"),a.domain()[0]}).property("yScale"),maxAxisValue:Ember.computed(function(){var a;return a=this.get("yScale"),a.domain()[1]}).property("yScale"),numColorSeries:Ember.computed.alias("individualBarLabels.length"),hasLegend:Ember.computed(function(){return this.get("stackBars")||this.get("isGrouped")&&this.get("legendItems.length")>1&&this.get("showLegend")}).property("stackBars","isGrouped","legendItems.length","showLegend"),legendItems:Ember.computed(function(){var a,b=this;return a=this.get("getSeriesColor"),this.get("individualBarLabels").map(function(c,d){var e;return e=a(c,d),b.get("stackBars")&&(d=b.get("labelIDMapping")[c]),{label:c,fill:e,stroke:e,icon:function(){return"square"},selector:".grouping-"+d}})}).property("individualBarLabels.[]","getSeriesColor","stackBars","labelIDMapping.[]"),showDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f,g,h;return h=Ember.isArray(b.values),d=h?d.parentNode.parentNode:d,d3.select(d).classed("hovered",!0),f=b.group?'<span class="tip-label">'+b.group+"</span>":"",g=a.get("formatLabelFunction"),e=function(a){return f+='<span class="name">'+a.label+": </span>",f+='<span class="value">'+g(a.value)+"</span><br/>"},h?b.values.forEach(e):e(b),a.showTooltip(f,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){return Ember.isArray(b.values)&&(d=d.parentNode.parentNode),d3.select(d).classed("hovered",!1),a.hideTooltip()}:Ember.K}).property("isInteractive"),groupAttrs:Ember.computed(function(){var a,b=this;return a=this.get("xBetweenGroupScale"),{transform:function(c){var d,e;return d=b.get("graphicLeft")+a(c.group),e=b.get("graphicTop"),"translate("+d+", "+e+")"}}}).property("graphicLeft","graphicTop","xBetweenGroupScale"),stackedBarAttrs:Ember.computed(function(){var a,b,c=this;return b=1,a=this.get("yScale"),{"class":function(a,b){var d;return d=c.get("labelIDMapping")[a.label],"grouping-"+d},"stroke-width":0,width:function(a){return c.get("groupWidth")},x:null,y:function(c){return a(c.y1)+b},height:function(b){return a(b.y0)-a(b.y1)}}}).property("yScale","groupWidth","labelIDMapping.[]"),groupedBarAttrs:Ember.computed(function(){var a,b,c=this;return b=1,a=this.get("yScale"),{"class":function(a,b){return"grouping-"+b},"stroke-width":0,width:function(a){return c.get("barWidth")},x:function(a){return c.get("xWithinGroupScale")(a.label)},height:function(c){return Math.max(0,Math.abs(a(c.value)-a(0))-b)},y:function(c){return c.value>0?a(c.value):a(0)+b}}}).property("yScale","getSeriesColor","barWidth","xWithinGroupScale"),labelAttrs:Ember.computed(function(){var a=this;return{"stroke-width":0,transform:function(b){var c,d;return c=a.get("barWidth")/2,c+=a.get("isGrouped")||a.get("stackBars")?a.get("groupWidth")/2-a.get("barWidth")/2:a.get("xWithinGroupScale")(b.group),d=a.get("graphicTop")+a.get("graphicHeight")+a.get("labelPadding"),"translate("+c+", "+d+")"}}}).property("barWidth","isGrouped","stackBars","groupWidth","xWithinGroupScale","graphicTop","graphicHeight","labelPadding"),groups:Ember.computed(function(){return this.get("viewport").selectAll(".bars").data(this.get("finishedData"))})["volatile"](),yAxis:Ember.computed(function(){var a;return a=this.get("viewport").select(".y.axis"),a.empty()?this.get("viewport").insert("g",":first-child").attr("class","y axis"):a})["volatile"](),maxLabelWidth:Ember.computed(function(){return this.get("isGrouped")||this.get("stackBars")?this.get("groupWidth"):this.get("barWidth")}).property("isGrouped","stackBars","groupWidth","barWidth"),_shouldRotateLabels:!1,setRotateLabels:function(){var a,b,c;return a=this.get("groups").select(".groupLabel text"),b=this.get("maxLabelWidth"),c=!1,this.get("rotatedLabelLength")>b&&a.each(function(a){return this.getBBox().width>b?c=!0:void 0}),this.set("_shouldRotateLabels",c)},rotateLabelDegrees:Ember.computed(function(){var a,b;return b=Math.atan(this.get("labelHeight")/this.get("maxLabelWidth")),a=180*b/Math.PI,Math.max(a,20)}).property("labelHeight","maxLabelWidth"),rotatedLabelLength:Ember.computed(function(){var a;return a=Math.PI/180*this.get("rotateLabelDegrees"),Math.abs(this.get("maxLabelHeight")/Math.sin(a))}).property("maxLabelHeight","rotateLabelDegrees"),renderVars:["xWithinGroupScale","xBetweenGroupScale","yScale","finishedData","getSeriesColor"],drawChart:function(){return this.updateData(),this.updateLayout(),this.updateAxes(),this.updateGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},updateData:function(){var a,b,c,d,e,f;return c=this.get("groups"),e=this.get("showDetails"),d=this.get("hideDetails"),b=c.enter().append("g").attr("class","bars"),b.append("g").attr("class","groupLabel").append("text").on("mouseover",function(a,b){return e(a,b,this)}).on("mouseout",function(a,b){return d(a,b,this)}),c.exit().remove(),f=this.get("stackBars")?function(a){return a.stackedValues}:function(a){return a.values},a=c.selectAll("rect").data(f),a.enter().append("rect").on("mouseover",function(a,b){return e(a,b,this)}).on("mouseout",function(a,b){return d(a,b,this)}),a.exit().remove()},updateLayout:function(){var a,b,c,d,e,f=this;return a=this.get("groups"),c=a.select(".groupLabel text").attr("transform",null).text(function(a){return a.group}),this.setRotateLabels(),this.get("_shouldRotateLabels")?(e=this.get("rotateLabelDegrees"),b=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(a){return f.get("rotatedLabelLength")},getLabelText:function(a){return a.group}}),c.call(b.get("trim")).attr({"text-anchor":"end",transform:"rotate("+-e+")",dy:function(a){return this.getBBox().height}})):(d=this.get("maxLabelWidth"),b=Ember.Charts.Helpers.LabelTrimmer.create({getLabelSize:function(a){return d},getLabelText:function(a){var b;return null!=(b=a.group)?b:""}}),c.call(b.get("trim")).attr({"text-anchor":"middle",dy:this.get("labelPadding")}))},updateAxes:function(){var a,b,c,d;return d=d3.svg.axis().scale(this.get("yScale")).orient("right").ticks(this.get("numYTicks")).tickSize(this.get("graphicWidth")).tickFormat(this.get("formatValueAxis")),a=this.get("yAxis"),this.set("graphicLeft",this.maxLabelLength(a.selectAll("text"))+this.get("labelPadding")),c=this.get("graphicTop"),b=this.get("graphicLeft"),a.attr({transform:"translate("+b+","+c+")"}).call(d),a.selectAll("g").filter(function(a){return 0!==a}).classed("major",!1).classed("minor",!0),a.selectAll("text").style("text-anchor","end").attr({x:-this.get("labelPadding")})},updateGraphic:function(){var a,b;return b=this.get("groups"),a=this.get("stackBars")?this.get("stackedBarAttrs"):this.get("groupedBarAttrs"),b.attr(this.get("groupAttrs")),b.selectAll("rect").style("fill",this.get("getSeriesColor")).attr(a),b.select("g.groupLabel").attr(this.get("labelAttrs"))}}),Ember.Handlebars.helper("vertical-bar-chart",Ember.Charts.VerticalBarComponent)}(),function(){Ember.Charts.ScatterComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.Legend,Ember.Charts.FloatingTooltipMixin,Ember.Charts.AxesMixin,Ember.Charts.NoMarginChartMixin,{classNames:["chart-scatter"],formatXValue:d3.format(",.2f"),formatYValue:d3.format(",.2f"),dotRadius:7,dotShapeArea:Ember.computed(function(){return Math.pow(this.get("dotRadius"),2)}).property("dotRadius"),graphPadding:.05,tickSpacing:80,marginRight:Ember.computed.alias("horizontalMargin"),isShowingTotal:!1,totalPointData:null,filteredData:Ember.computed(function(){var a;return a=this.get("data"),Ember.isEmpty(a)?[]:a.filter(function(a){return null!=a.xValue&&null!=a.yValue&&isFinite(a.xValue)&&isFinite(a.yValue)})}).property("data.@each"),groupedData:Ember.computed(function(){var a,b,c,d,e,f=this;if(a=this.get("filteredData"),Ember.isEmpty(a))return[];b=Ember.Charts.Helpers.groupBy(a,function(a){var b;return null!=(b=a.group)?b:f.get("ungroupedSeriesName")}),e=[];for(c in b)d=b[c],e.push(d);return e}).property("filteredData.@each"),groupNames:Ember.computed(function(){var a,b,c,d,e;for(d=this.get("groupedData"),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.get(0).group);return e}).property("groupedData"),numGroups:Ember.computed.alias("groupedData.length"),isGrouped:Ember.computed(function(){return this.get("numGroups")>1}).property("numGroups"),finishedData:Ember.computed.alias("groupedData"),axisTitleHeightOffset:Ember.computed(function(){return this.get("axisTitleHeight")+this.get("labelPadding")}).property("axisTitleHeight","labelPadding"),legendChartPadding:Ember.computed(function(){return this.get("axisTitleHeightOffset")+this.get("labelHeightOffset")}).property("labelHeightOffset","axisTitleHeightOffset"),graphicTop:Ember.computed.alias("axisTitleHeight"),graphicLeft:Ember.computed.alias("labelWidthOffset"),graphicHeight:Ember.computed(function(){return this.get("height")-this.get("legendHeight")-this.get("legendChartPadding")}).property("height","legendHeight","legendChartPadding"),graphicWidth:Ember.computed(function(){return this.get("width")-this.get("labelWidthOffset")}).property("width","labelWidthOffset"),axisTitleHeight:18,xDomain:Ember.computed(function(){var a,b,c,d;return a=this.get("isShowingTotal")?[this.get("totalPointData")]:[],d=d3.extent(a.concat(this.get("filteredData")),function(a){return a.xValue}),c=d[0],b=d[1],c===b&&0===b?[-1,1]:c===b?[c*(1-this.get("graphPadding")),c*(1+this.get("graphPadding"))]:[c,b]}).property("filteredData.@each","isShowingTotal","totalPointData"),yDomain:Ember.computed(function(){var a,b,c,d;return a=this.get("isShowingTotal")?[this.get("totalPointData")]:[],d=d3.extent(a.concat(this.get("filteredData")),function(a){return a.yValue}),c=d[0],b=d[1],c===b&&0===b?[-1,1]:c===b?[c*(1-this.get("graphPadding")),c*(1+this.get("graphPadding"))]:[c,b]}).property("filteredData.@each","isShowingTotal","totalPointData","graphPadding"),xScale:Ember.computed(function(){var a,b,c,d;return d=this.get("xDomain"),a=this.get("graphicLeft"),b=this.get("graphicWidth"),c=(d[1]-d[0])*this.get("graphPadding"),d3.scale.linear().domain([d[0]-c,d[1]+c]).range([a,a+b]).nice(this.get("numXTicks"))}).property("xDomain","graphPadding","graphicLeft","graphicWidth","numXTicks"),yScale:Ember.computed(function(){var a,b,c,d;return d=this.get("yDomain"),b=this.get("graphicTop"),a=this.get("graphicHeight"),c=(d[1]-d[0])*this.get("graphPadding"),d3.scale.linear().domain([d[0]-c,d[1]+c]).range([b+a,b]).nice(this.get("numYTicks"))}).property("yDomain","graphPadding","graphicTop","graphicHeight","numYTicks"),groupShapes:Ember.computed(function(){return["circle","square","triangle-up","cross","diamond"]}),numGroupShapes:Ember.computed.alias("groupShapes.length"),numGroupColors:2,maxNumGroups:Ember.computed(function(){return this.get("numGroupColors")*this.get("numGroupShapes")}).property("numGroupColors","numGroupShapes"),displayGroups:Ember.computed(function(){return this.get("isGrouped")&&this.get("numGroups")<=this.get("maxNumGroups")}).property("isGrouped","numGroups","numGroupShapes"),getGroupShape:Ember.computed(function(){var a=this;return function(b,c){return c=a.get("groupNames").indexOf(b.group),a.get("displayGroups")?a.get("groupShapes")[c%a.get("numGroupShapes")]:"circle"}}),getGroupColor:Ember.computed(function(){var a=this;return function(b,c){var d;return d=0,a.get("displayGroups")&&(c=a.get("groupNames").indexOf(b.group),d=Math.floor(c/a.get("numGroupShapes"))),a.get("colorScale")(d/a.get("numGroupColors"))}}),hasLegend:Ember.computed(function(){return this.get("isGrouped")&&this.get("showLegend")}).property("isGrouped","showLegend"),legendIconRadius:Ember.computed.alias("dotRadius"),legendItems:Ember.computed(function(){var a,b,c,d,e;return this.get("hasNoData")?[]:(c=this.get("getGroupShape"),b=this.get("getGroupColor"),a=this.get("displayGroups"),d=this.get("groupedData").map(function(d,e){var f,g;return f=d.get(0).group,g=1===d.get("length")?d.get(0):null,{label:f,group:f,stroke:b,fill:a?b:"transparent",icon:c,selector:".group-"+e,xValue:null!=g?g.xValue:void 0,yValue:null!=g?g.yValue:void 0}}),this.get("isShowingTotal")&&(e=this.get("totalPointData"),d.unshift({label:e.group,group:e.group,stroke:b,selector:".totalgroup",xValue:e.xValue,yValue:e.yValue})),d)}).property("hasNoData","groupedData","getGroupShape","getGroupColor","displayGroups","isShowingTotal","totalPointData"),xValueDisplayName:"X Factor",yValueDisplayName:"Y Factor",showDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f,g;return d3.select(d).classed("hovered",!0),f=a.get("formatXValue"),g=a.get("formatYValue"),e='<span class="tip-label">'+b.group+"</span>",e+='<span class="name">'+a.get("xValueDisplayName")+": </span>",e+='<span class="value">'+f(b.xValue)+"</span><br/>",e+='<span class="name">'+a.get("yValueDisplayName")+": </span>",e+='<span class="value">'+g(b.yValue)+"</span>",a.showTooltip(e,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){return d3.select(d).classed("hovered",!1),a.hideTooltip()}:Ember.K}).property("isInteractive"),groupAttrs:Ember.computed(function(){return{"class":function(a,b){return"group group-"+b}}}),pointAttrs:Ember.computed(function(){var a=this;return{d:d3.svg.symbol().size(this.get("dotShapeArea")).type(this.get("getGroupShape")),fill:this.get("displayGroups")?this.get("getGroupColor"):"transparent",stroke:this.get("getGroupColor"),"stroke-width":1.5,transform:function(b){var c,d;return c=a.get("xScale")(b.xValue),d=a.get("yScale")(b.yValue),"translate("+c+", "+d+")"}}}).property("dotShapeArea","getGroupShape","xScale","yScale","displayGroups","getGroupColor"),groups:Ember.computed(function(){return this.get("viewport").selectAll(".group").data(this.get("finishedData"))})["volatile"](),selectOrCreateAxis:function(a){var b;return b=this.get("viewport").select(a),b.empty()?this.get("viewport").insert("g",":first-child"):b},selectOrCreateAxisTitle:function(a){var b;return b=this.get("viewport").select(a),b.empty()?this.get("viewport").append("text"):b},xAxis:Ember.computed(function(){return this.selectOrCreateAxis(".x.axis").attr("class","x axis")})["volatile"](),yAxis:Ember.computed(function(){return this.selectOrCreateAxis(".y.axis").attr("class","y axis")})["volatile"](),xAxisTitle:Ember.computed(function(){return this.selectOrCreateAxisTitle(".x.axis-title").attr("class","x axis-title")})["volatile"](),yAxisTitle:Ember.computed(function(){return this.selectOrCreateAxisTitle(".y.axis-title").attr("class","y axis-title")})["volatile"](),renderVars:["xScale","yScale","dotShapeArea","finishedData","xValueDisplayName","yValueDisplayName"],drawChart:function(){return this.updateTotalPointData(),this.updateData(),this.updateAxes(),this.updateGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},totalPointShape:Ember.computed(function(){var a,b=this;return a=this.get("dotShapeArea"),function(c){return c.append("path").attr({"class":"totaldot",d:d3.svg.symbol().size(a).type("circle"),fill:b.get("getGroupColor")}),c.append("path").attr({"class":"totaloutline",d:d3.svg.symbol().size(3*a).type("circle"),fill:"transparent",stroke:b.get("getGroupColor"),"stroke-width":2})}}),updateTotalPointData:function(){var a,b;return a=this.get("isShowingTotal")?[this.get("totalPointData")]:[],b=this.get("viewport").selectAll(".totalgroup").data(a),b.exit().remove(),b.enter().append("g").attr("class","totalgroup").call(this.get("totalPointShape"))},updateData:function(){var a,b;return a=this.get("groups"),a.enter().append("g").attr("class","group").attr(this.get("groupAttrs")),a.exit().remove(),b=a.selectAll(".dot").data(function(a){return a}),b.enter().append("path").attr("class","dot"),b.exit().remove()},updateAxes:function(){var a,b,c,d,e,f,g,h,i;return g=d3.svg.axis().scale(this.get("xScale")).orient("top").ticks(this.get("numXTicks")).tickSize(this.get("graphicHeight")).tickFormat(this.get("formatXValue")),i=d3.svg.axis().scale(this.get("yScale")).orient("right").ticks(this.get("numYTicks")).tickSize(this.get("graphicWidth")).tickFormat(this.get("formatYValue")),e=this.get("graphicTop"),c=this.get("graphicHeight"),a=this.get("xAxis").attr("transform","translate(0,"+(e+c)+")").call(g),a.selectAll("g").filter(function(a){return 0!==a}).classed("major",!1).classed("minor",!0),f=this.get("labelPadding"),a.selectAll("text").style("text-anchor","middle").attr({y:function(a){return this.getBBox().height+f/2}}),b=this.get("yAxis"),this.set("graphicLeft",this.maxLabelLength(b.selectAll("text"))+this.get("labelPadding")),d=this.get("graphicLeft"),b.attr("transform","translate("+d+",0)").call(i),b.selectAll("g").filter(function(a){return 0!==a}).classed("major",!1).classed("minor",!0),b.selectAll("text").style("text-anchor","end").attr({x:-this.get("labelPadding")}),h=this.get("labelHeightOffset")+this.get("labelPadding"),this.get("xAxisTitle").text(this.get("xValueDisplayName")).style("text-anchor","middle").attr({x:this.get("graphicWidth")/2+this.get("labelWidthOffset"),y:this.get("graphicBottom")+h}),this.get("yAxisTitle").text(this.get("yValueDisplayName")).style("text-anchor","start").attr({y:0,x:0})},updateGraphic:function(){var a,b,c=this;return b=this.get("showDetails"),a=this.get("hideDetails"),this.get("groups").selectAll(".dot").attr(this.get("pointAttrs")).on("mouseover",function(a,c){return b(a,c,this)}).on("mouseout",function(b,c){return a(b,c,this)}),this.get("viewport").select(".totalgroup").on("mouseover",function(a,c){return b(a,c,this)}).on("mouseout",function(b,c){return a(b,c,this)}).attr({transform:function(a){var b,d;return b=c.get("xScale")(a.xValue),d=c.get("yScale")(a.yValue),"translate("+b+", "+d+")"}})}}),Ember.Handlebars.helper("scatter-chart",Ember.Charts.ScatterComponent)}(),function(){Ember.Charts.TimeSeriesComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.Legend,Ember.Charts.TimeSeriesLabeler,Ember.Charts.FloatingTooltipMixin,Ember.Charts.HasTimeSeriesRule,Ember.Charts.AxesMixin,Ember.Charts.Formattable,Ember.Charts.NoMarginChartMixin,{classNames:["chart-time-series"],lineData:null,barData:null,formatTime:d3.time.format("%Y-%m-%d"),formatTimeLong:d3.time.format("%a %b %-d, %Y"),ungroupedSeriesName:"Other",interpolate:!1,yAxisFromZero:!1,barPadding:0,barGroupPadding:.25,barLeftOffset:0,DEFAULT_MAX_NUMBER_OF_LABELS:10,finishedData:Ember.computed(function(){return{lineData:this.get("_groupedLineData"),groupedBarData:this.get("_groupedBarData")}}).property("_groupedLineData.@each.values","_groupedBarData.@each"),hasNoData:Ember.computed(function(){return!this.get("_hasBarData")&&!this.get("_hasLineData")}).property("_hasBarData","_hasLineData"),legendChartPadding:Ember.computed.alias("labelHeightOffset"),_getLabelOrDefault:function(a){var b;return(null!=(b=a.label)?b.toString():void 0)||this.get("ungroupedSeriesName")},_groupedLineData:Ember.computed(function(){var a,b,c,d,e,f=this;if(c=this.get("lineData"),Ember.isEmpty(c))return[];b=Ember.Charts.Helpers.groupBy(c,function(a){return f._getLabelOrDefault(a)}),e=[];for(a in b)d=b[a],e.push({group:a,values:d});return e}).property("lineData.@each","ungroupedSeriesName"),_groupedBarData:Ember.computed(function(){var a,b,c,d,e,f,g,h,i;return a=this.get("barData"),Ember.isEmpty(a)?[]:(c=Ember.Charts.Helpers.groupBy(a,function(a){
return a.time.getTime()}),b=function(){var a;a=[];for(i in c)f=c[i],a.push(function(){var a,b,c;for(c=[],a=0,b=f.length;b>a;a++)e=f[a],g=this._getLabelOrDefault(e),h=e.time,d=this._transformCenter(e.time),c.push({group:g,time:d,value:e.value,label:g,labelTime:h});return c}.call(this));return a}.call(this))}).property("barData.@each","ungroupedSeriesName","barLeftOffset"),_transformCenter:function(a){var b,c;return b=this._getTimeDeltaFromSelectedInterval(),c=this.get("barLeftOffset"),0!==c&&(a=this._padTimeWithIntervalMultiplier(a,b,c)),a},_getTimeDeltaFromSelectedInterval:function(){switch(this.get("selectedInterval")){case"years":case"Y":return"year";case"quarters":case"Q":return"quarter";case"months":case"M":return"month";case"weeks":case"W":return"week";case"seconds":case"S":return"second"}},_padTimeForward:function(a,b){return this._padTimeWithIntervalMultiplier(a,b,.5)},_padTimeBackward:function(a,b){return this._padTimeWithIntervalMultiplier(a,b,-.5)},_padTimeWithIntervalMultiplier:function(a,b,c){var d,e,f;return null!=a&&(d="quarter"===b?"month":b,f="quarter"===b?3:1,e=d3.time[d].offset(a,f)-a.getTime(),a=e*c+a.getTime()),new Date(a)},_barGroups:Ember.computed(function(){var a,b,c=this;return a=this.get("barData"),Ember.isEmpty(a)?[]:(b=Ember.Charts.Helpers.groupBy(a,function(a){return c._getLabelOrDefault(a)}),_.keys(b))}).property("barData.@each","ungroupedSeriesName"),_hasLineData:Ember.computed.notEmpty("lineData"),_hasBarData:Ember.computed.notEmpty("barData"),graphicLeft:Ember.computed.alias("labelWidthOffset"),graphicWidth:Ember.computed(function(){return this.get("width")-this.get("graphicLeft")}).property("width","graphicLeft"),graphicHeight:Ember.computed(function(){return this.get("height")-this.get("legendHeight")-this.get("legendChartPadding")}).property("height","legendHeight","legendChartPadding"),timeDelta:Ember.computed(function(){var a,b,c,d,e;return c=this.get("_groupedBarData"),Ember.isEmpty(c)||c.get("length")<2?"month":(b=c[0][0].time,e=c[1][0].time,d=864e5,a=(e-b)/d,a>351?"year":a>33?"quarter":a>9?"month":a>3?"week":"day")}).property("_groupedBarData"),barDataExtent:Ember.computed(function(){var a,b,c,d,e,f,g,h;return h=this.get("timeDelta"),c=this.get("_groupedBarData"),Ember.isEmpty(c)?[new Date,new Date]:(b=_.first(c),d=_.last(c),g=new Date(b[0].time),a=new Date(d[0].time),f=this._padTimeBackward(g,h),e=this._padTimeForward(a,h),[new Date(f),new Date(e)])}).property("timeDelta","_groupedBarData.@each"),xBetweenGroupDomain:Ember.computed.alias("barDataExtent"),xWithinGroupDomain:Ember.computed.alias("_barGroups"),barWidth:Ember.computed(function(){return this.get("xGroupScale").rangeBand()}).property("xGroupScale"),paddedGroupWidth:Ember.computed(function(){var a,b,c,d;return d=this.get("timeDelta"),a=this.get("xTimeScale"),b=this.get("xBetweenGroupDomain")[0],c="quarter"===d?d3.time.month.offset(b,3):d3.time[d].offset(b,1),a(c)-a(b)}).property("timeDelta","xTimeScale","xBetweenGroupDomain"),lineSeriesNames:Ember.computed(function(){var a;return a=this.get("_groupedLineData"),Ember.isEmpty(a)?[]:a.map(function(a){return a.group})}).property("_groupedLineData"),lineDataExtent:Ember.computed(function(){var a,b;return a=this.get("_groupedLineData"),Ember.isEmpty(a)?[new Date,new Date]:(b=a.getEach("values").map(function(a){return d3.extent(a.map(function(a){return a.time}))}),[d3.min(b,function(a){return a[0]}),d3.max(b,function(a){return a[1]})])}).property("_groupedLineData.@each.values"),xBetweenSeriesDomain:Ember.computed.alias("lineSeriesNames"),xWithinSeriesDomain:Ember.computed.alias("lineDataExtent"),maxNumberOfLabels:Ember.computed(function(a,b){return this.get("dynamicXAxis")?Math.min(null!=b?b:this.get("DEFAULT_MAX_NUMBER_OF_LABELS"),this.get("numXTicks")):this.get("numXTicks")}).property("numXTicks","dynamicXAxis"),xDomain:Ember.computed(function(){var a,b,c,d,e,f;return this.get("_hasBarData")?this.get("_hasLineData")?(e=this.get("xBetweenGroupDomain"),c=e[0],a=e[1],f=this.get("xWithinSeriesDomain"),d=f[0],b=f[1],[Math.min(c,d),Math.max(a,b)]):this.get("xBetweenGroupDomain"):this.get("xWithinSeriesDomain")}).property("xBetweenGroupDomain","xWithinSeriesDomain","_hasBarData","_hasLineData","maxNumberOfLabels"),yDomain:Ember.computed(function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.get("_groupedLineData"),a=this.get("_groupedBarData"),g=d3.max(d,function(a){return d3.max(a.values,function(a){return a.value})}),j=d3.min(d,function(a){return d3.min(a.values,function(a){return a.value})}),f=d3.max(a,function(a){return d3.max(a,function(a){return a.value})}),i=d3.min(a,function(a){return d3.min(a,function(a){return a.value})}),b=this.get("_hasBarData"),c=this.get("_hasLineData"),b?c?(h=Math.min(i,j),e=Math.max(f,g)):(h=i,e=f):(h=j,e=g),this.get("yAxisFromZero")||h===e){if(0>e)return[h,0];if(h>0)return[0,e];if(h===e&&0===e)return[-1,1]}return[h,e]}).property("_groupedLineData","_groupedBarData","_hasBarData","_hasLineData","yAxisFromZero"),yRange:Ember.computed(function(){return[this.get("graphicTop")+this.get("graphicHeight"),this.get("graphicTop")]}).property("graphicTop","graphicHeight"),yScale:Ember.computed(function(){return d3.scale.linear().domain(this.get("yDomain")).range(this.get("yRange")).nice(this.get("numYTicks"))}).property("yDomain","yRange","numYTicks"),xRange:Ember.computed(function(){return[this.get("graphicLeft"),this.get("graphicLeft")+this.get("graphicWidth")]}).property("graphicLeft","graphicWidth"),xTimeScale:Ember.computed(function(){var a;return a=this.get("xDomain"),d3.time.scale().domain(this.get("xDomain")).range(this.get("xRange"))}).property("xDomain","xRange"),xGroupScale:Ember.computed(function(){return d3.scale.ordinal().domain(this.get("xWithinGroupDomain")).rangeRoundBands([0,this.get("paddedGroupWidth")],this.get("barPadding")/2,this.get("barGroupPadding")/2)}).property("xWithinGroupDomain","paddedGroupWidth","barPadding","barGroupPadding"),minAxisValue:Ember.computed(function(){var a;return a=this.get("yScale"),a.domain()[0]}).property("yScale"),maxAxisValue:Ember.computed(function(){var a;return a=this.get("yScale"),a.domain()[1]}).property("yScale"),showDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f,g,h;return d3.select(d).classed("hovered",!0),h=null!=b.labelTime?b.labelTime:b.time,f='<span class="tip-label">'+a.get("formatTime")(h)+"</span>",g=a.get("formatLabelFunction"),e=function(a){return f+='<span class="name">'+a.group+": </span>",f+='<span class="value">'+g(a.value)+"</span><br/>"},Ember.isArray(b.values)?b.values.forEach(e):e(b),a.showTooltip(f,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){return d3.select(d).classed("hovered",!1),a.hideTooltip()}:Ember.K}).property("isInteractive"),zeroDisplacement:1,groupAttrs:Ember.computed(function(){var a=this;return{transform:function(b){return"translate("+-a.get("paddedGroupWidth")/2+",0)"}}}).property("paddedGroupWidth"),groupedBarAttrs:Ember.computed(function(){var a,b,c,d;return b=this.get("xTimeScale"),a=this.get("xGroupScale"),c=this.get("yScale"),d=this.get("zeroDisplacement"),{"class":function(a,b){return"grouping-"+b},"stroke-width":0,width:this.get("barWidth"),x:function(c){return a(c.label)+b(c.time)},y:function(a){return a.value>0?c(a.value):c(0)+d},height:function(a){var b;return b=Math.max(0,c.domain()[0]),Math.max(0,a.value>b?Math.abs(c(b)-c(a.value))-d:Math.abs(c(a.value)-c(b))-d)}}}).property("xTimeScale","xGroupScale","barWidth","yScale","zeroDisplacement","barLeftOffset"),line:Ember.computed(function(){var a=this;return d3.svg.line().x(function(b){return a.get("xTimeScale")(b.time)}).y(function(b){return a.get("yScale")(b.value)}).interpolate(this.get("interpolate")?"basis":"linear")}).property("xTimeScale","yScale","interpolate"),lineColorFn:Ember.computed(function(){var a=this;return function(b,c){var d;switch(d=a.get("getSeriesColor"),c){case 0:return d(b,0);case 1:return d(b,2);case 2:return d(b,0);case 3:return d(b,2);case 4:return d(b,0);case 5:return d(b,1);default:return d(b,c)}}}),lineAttrs:Ember.computed(function(){var a,b;return a=this.get("getSeriesColor"),b=this.get("line"),{"class":function(a,b){return"line series-"+b},d:function(a){return b(a.values)},stroke:this.get("lineColorFn"),"stroke-width":function(a,b){switch(b){case 0:return 2;case 1:return 1.5;case 2:return 2;case 3:return 1.5;case 4:return 2.5;case 5:return 2.5;default:return 2}},"stroke-dasharray":function(a,b){switch(b){case 2:case 3:case 5:return"2,2";default:return""}}}}).property("line","getSeriesColor"),numLines:Ember.computed.alias("xBetweenSeriesDomain.length"),numBarsPerGroup:Ember.computed.alias("xWithinGroupDomain.length"),numColorSeries:6,numSecondaryColorSeries:Ember.computed.alias("numBarsPerGroup"),secondaryMinimumTint:Ember.computed(function(){return 0===this.get("numLines")?0:.4}).property("numLines"),secondaryMaximumTint:Ember.computed(function(){return 0===this.get("numLines")?.8:.85}).property("numLines"),hasLegend:Ember.computed(function(){return this.get("legendItems.length")>1&&this.get("showLegend")}).property("legendItems.length","showLegend"),legendItems:Ember.computed(function(){var a,b,c=this;return a=this.get("getSeriesColor"),b=this.get("lineAttrs"),this.get("xBetweenSeriesDomain").map(function(a,c){return{label:a,stroke:b.stroke(a,c),width:b["stroke-width"](a,c),dotted:b["stroke-dasharray"](a,c),icon:function(){return"line"},selector:".series-"+c}}).concat(this.get("xWithinGroupDomain").map(function(a,b){var d;return d=c.get("getSecondarySeriesColor")(a,b),{stroke:d,fill:d,label:a,icon:function(){return"square"},selector:".grouping-"+b}}))}).property("xBetweenSeriesDomain","xWithinGroupDomain","getSeriesColor","getSecondarySeriesColor"),removeAllGroups:function(){return this.get("viewport").selectAll(".bars").remove()},groups:Ember.computed(function(){return this.get("viewport").selectAll(".bars").data(this.get("_groupedBarData"))})["volatile"](),removeAllSeries:function(){return this.get("viewport").selectAll(".series").remove()},series:Ember.computed(function(){return this.get("viewport").selectAll(".series").data(this.get("_groupedLineData"))})["volatile"](),xAxis:Ember.computed(function(){var a;return a=this.get("viewport").select(".x.axis"),a.empty()?this.get("viewport").insert("g",":first-child").attr("class","x axis"):a})["volatile"](),yAxis:Ember.computed(function(){var a;return a=this.get("viewport").select(".y.axis"),a.empty()?this.get("viewport").insert("g",":first-child").attr("class","y axis"):a})["volatile"](),renderVars:["barLeftOffset","labelledTicks","xGroupScale","xTimeScale","yScale"],drawChart:function(){return this.updateBarData(),this.updateLineData(),this.updateLineMarkers(),this.updateAxes(),this.updateBarGraphic(),this.updateLineGraphic(),this.get("hasLegend")?this.drawLegend():this.clearLegend()},updateAxes:function(){var a,b,c,d,e,f,g;return f=d3.svg.axis().scale(this.get("xTimeScale")).orient("bottom").tickValues(this.get("labelledTicks")).tickSubdivide(this.get("numberOfMinorTicks")).tickFormat(this.get("formattedTime")).tickSize(6,3),e=this.get("graphicTop"),c=this.get("graphicHeight"),a=this.get("xAxis").attr({transform:"translate(0,"+(e+c)+")"}).call(f),g=d3.svg.axis().scale(this.get("yScale")).orient("right").ticks(this.get("numYTicks")).tickSize(this.get("graphicWidth")).tickFormat(this.get("formatValueAxis")),b=this.get("yAxis"),this.set("graphicLeft",this.maxLabelLength(b.selectAll("text"))+this.get("labelPadding")),d=this.get("graphicLeft"),b.attr("transform","translate("+d+",0)").call(g),b.selectAll("g").filter(function(a){return a}).classed("major",!1).classed("minor",!0),b.selectAll("text").style("text-anchor","end").attr({x:-this.get("labelPadding")})},updateBarData:function(){var a,b,c,d;return this.removeAllGroups(),b=this.get("groups"),d=this.get("showDetails"),c=this.get("hideDetails"),b.enter().insert("g",".series").attr("class","bars"),b.exit().remove(),a=b.selectAll("rect").data(function(a){return a}),a.enter().append("rect").on("mouseover",function(a,b){return d(a,b,this)}).on("mouseout",function(a,b){return c(a,b,this)}),a.exit().remove()},updateBarGraphic:function(){var a;return a=this.get("groups"),a.attr(this.get("groupAttrs")),a.selectAll("rect").style("fill",this.get("getSecondarySeriesColor")).attr(this.get("groupedBarAttrs"))},updateLineData:function(){var a;return this.removeAllSeries(),a=this.get("series"),a.enter().append("g").attr("class","series").append("path").attr("class","line"),a.exit().remove()},updateLineGraphic:function(){var a,b;return b=this.get("series"),a=this.get("graphicTop"),b.attr("transform","translate(0, "+a+")"),b.select("path.line").attr(this.get("lineAttrs"))}}),Ember.Handlebars.helper("time-series-chart",Ember.Charts.TimeSeriesComponent)}(),function(){Ember.Charts.BubbleComponent=Ember.Charts.ChartComponent.extend(Ember.Charts.FloatingTooltipMixin,{classNames:["chart-bubble"],layoutGravity:-.01,damper:.1,charge:Ember.computed(function(){return function(a){return-Math.pow(a.radius,2)/8}}),formatLabel:d3.format(",.2f"),showDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){var e,f;return d3.select(d).classed("hovered",!0),f=a.get("formatLabel"),e='<span class="tip-label">'+b.label+"</span>",e+='<span class="name">'+a.get("tooltipValueDisplayName")+": </span>",e+='<span class="value">'+f(b.value)+"</span>",a.showTooltip(e,d3.event)}:Ember.K}).property("isInteractive"),hideDetails:Ember.computed(function(){var a=this;return this.get("isInteractive")?function(b,c,d){return d3.select(d).classed("hovered",!1),a.hideTooltip()}:Ember.K}).property("isInteractive"),renderVars:["selectedSeedColor"],radiusScale:Ember.computed(function(){var a,b;return a=d3.max(this.data,function(a){return a.value}),b=d3.min([this.get("width"),this.get("height")])/7,d3.scale.pow().exponent(.5).domain([0,a]).range([2,b])}).property("data","width","height"),nodeData:Ember.computed(function(){var a,b,c,d=this;return a=this.get("data"),Ember.isEmpty(a)?[]:(c=this.get("radiusScale"),b=a.map(function(a){return{radius:c(a.value),value:a.value,label:a.label,id:a.label,x:Math.random()*d.get("width")/2,y:Math.random()*d.get("height")/2}}),b.sort(function(a,b){return b.value-a.value}),b)}).property("radiusScale"),finishedData:Ember.computed.alias("nodeData"),numColorSeries:Ember.computed.alias("finishedData.length"),drawChart:function(){return this.updateVis()},updateVis:function(){var a,b,c,d,e,f,g,h,i=this;return h=this.get("viewport"),f=this.get("nodeData"),g=this.get("showDetails"),d=this.get("hideDetails"),b=this.get("getSeriesColor"),a=h.selectAll("circle").data(f,function(a){return a.id}),a.enter().append("circle").attr("r",0).attr("id",function(a){return"bubble_"+a.id}).on("mouseover",function(a,b){return g(a,b,this)}).on("mouseout",function(a,b){return d(a,b,this)}),a.transition().duration(2e3).attr("r",function(a){return a.radius}),a.attr("fill",b).attr("stroke-width",2).attr("stroke",function(a,c){return d3.rgb(b(a,c)).darker()}),a.exit().remove(),e=function(a){var b;return b={x:i.get("width")/2,y:i.get("height")/2},function(c){return c.x=c.x+(b.x-c.x)*(i.get("damper")+.02)*a,c.y=c.y+(b.y-c.y)*(i.get("damper")+.02)*a}},c=d3.layout.force().nodes(f).size([this.get("width"),this.get("height")]),c.gravity(this.get("layoutGravity")).charge(this.get("charge")).friction(.9).on("tick",function(b){return a.each(e(b.alpha)).attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y})}),c.start(),h.selectAll(".years").remove()}}),Ember.Handlebars.helper("bubble-chart",Ember.Charts.BubbleComponent)}();